(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(38).concat([function(e){e.exports={a:["asfasdf","asd","asax","adsFAS","retvc","tybxcvb","ytrnv","tuvnb","bmui","ewqvzz"]}},,,function(e,a,t){e.exports=t(111)},,,,,function(e,a,t){},,,,,,,,,,,,,,,,,,,,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,,,,,,,,,,function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e){e.exports={}},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},function(e,a,t){},,function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),i=t(14),r=t.n(i),l=(t(46),t(1)),o=t(2),s=t(4),m=t.n(s),u=(t(70),function(){return c.a.createElement("div",{className:"FinListItem--LoadingState"},c.a.createElement("div",{className:"FinListItem--Left"},c.a.createElement("div",{className:"FinListItem__Cat"},c.a.createElement("div",{className:"LoadingState"})),c.a.createElement("div",{className:"FinListItem__Date"},c.a.createElement("div",{className:"LoadingState"})),c.a.createElement("div",{className:"FinListItem__Comment"},c.a.createElement("div",{className:"LoadingState"}))),c.a.createElement("div",{className:"FinListItem--Right"},c.a.createElement("div",{className:"FinListItem--Amount"},c.a.createElement("div",{className:"LoadingState"}))))}),d=(t(71),function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"DayExpense--Loading"},c.a.createElement("div",{className:"DayInfo"},c.a.createElement("div",{className:"LoadingState"})),c.a.createElement("div",{className:"DayExpenseInfo"},c.a.createElement("div",{className:"DayHeader"},c.a.createElement("div",{className:"DayHeader-Weekday"},c.a.createElement("div",{className:"LoadingState"})),c.a.createElement("div",{className:"DayExpenseAmount"},c.a.createElement("div",{className:"LoadingState"}))),c.a.createElement("div",{className:"DayExpenseList"},c.a.createElement(u,null),c.a.createElement(u,null)))),c.a.createElement("div",{className:"DayExpense--Loading"},c.a.createElement("div",{className:"DayInfo"},c.a.createElement("div",{className:"LoadingState"})),c.a.createElement("div",{className:"DayExpenseInfo"},c.a.createElement("div",{className:"DayHeader"},c.a.createElement("div",{className:"DayHeader-Weekday"},c.a.createElement("div",{className:"LoadingState"})),c.a.createElement("div",{className:"DayExpenseAmount"},c.a.createElement("div",{className:"LoadingState"}))),c.a.createElement("div",{className:"DayExpenseList"},c.a.createElement(u,null),c.a.createElement(u,null)))))}),E=(t(72),Object(o.b)()(function(e){var a=e.item,t=e.isLoading,n=e.dayMode,i=void 0!==n&&n,r=e.isLast,l=void 0!==r&&r,o=e.dispatch,s=a.category,m=a.subcategory,d=a.date,E=a.amount,v=a.comment,p=a.isScheduled;return c.a.createElement("div",{className:"FinItemPanel forbid-select",onClick:function(){o({type:"SELECT_ITEM",item:a})}},c.a.createElement("div",{className:"FinItem ".concat(l?"":"FinItem-Border")},t?c.a.createElement(u,null):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"Fin-Left"},c.a.createElement("div",{className:"Fin-SubCat"},s," - ",m),c.a.createElement("div",{className:"Fin-Info Fin-Date"},c.a.createElement("span",null,i?d.substring(11):d)),c.a.createElement("div",{className:"Fin-Info Fin-Comment"},p&&c.a.createElement("span",{className:"Fin-IsScheduled"},"\u5468\u671f"),c.a.createElement("span",null,v))),c.a.createElement("div",{className:"Fin-Right"},c.a.createElement("span",{className:"Fin-Amount"},parseFloat(E).toFixed(2))))))})),v=(t(73),Object(o.b)()(function(e){var a=e.isLoading,t=e.items,n=e.dispatch;return c.a.createElement("div",{className:"FinMain"},c.a.createElement("div",{className:"App-Toolbar"},c.a.createElement("div",{className:"App-Toolbtn"},c.a.createElement("div",{className:"App-Btn forbid-select App-CreateItem",onClick:function(){n({type:"CREATE_ITEM"})}},"\u8bb0\u4e00\u7b14"),c.a.createElement("div",{className:"App-Btn forbid-select App-CreateFast",onClick:function(){n({type:"CHANGE_TO_FIN_TEMPLATE_LIST"})}},"\u901f\u8bb0"))),c.a.createElement("div",{className:"App-Container"},c.a.createElement("div",{className:"App-FinList"},t.map(function(e,t){return c.a.createElement("div",{key:t},c.a.createElement(E,{isLoading:a,item:e}))}))))})),p=t(3),f=(t(74),function(e){var a=e.category,t=e.subcategory,n=e.onClickHandler,i=void 0===n?function(){}:n;return c.a.createElement("div",{className:"FinComCatItem",onClick:function(){return i(a,t)}},c.a.createElement("span",{className:"SubCat-Name"},t))}),N=t(38),b=(t(75),function(e){var a=e.optionList,t=void 0===a?N.a:a,i=e.placeholder,r=void 0===i?"":i,o=e.onChangeCallback,s=e.defaultValue,m=void 0===s?"":s,u=e.searchOptions,d=void 0===u?5:u,E=Object(n.useState)(m),v=Object(l.a)(E,2),p=v[0],f=v[1],b=Object(n.useState)([]),g=Object(l.a)(b,2),O=g[0],S=g[1],C=Object(n.useState)(!1),y=Object(l.a)(C,2),h=y[0],I=y[1];Object(n.useEffect)(function(){var e=function(e){var a=e.target.getAttribute("class")||"";a.indexOf("InputField")<0&&a.indexOf("OptionContainer")<0&&(I(!1),S([]))};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[]);var T=function(e){var a=e.target.innerText;f(a),S([]),o&&o(a)};return c.a.createElement("div",{className:"SearchDropdown"},c.a.createElement("div",{className:"Dropdown-Input ".concat(h?"SearchDropdown-Focused":"")},c.a.createElement("div",{className:"Dropdown-SearchImage"},c.a.createElement("input",{className:"InputField",placeholder:r,type:"input",onChange:function(e){var a=e.target.value,n=t.filter(function(e){return e.toLowerCase().indexOf(a.toLowerCase())>-1});I(!0),f(a),S(a?n.slice(0,d):[]),o&&o(a)},value:p}))),c.a.createElement("div",{className:"OptionList ".concat(h?"SearchDropdown-Focused":"")},O&&O.length>0&&O.map(function(e,a){return c.a.createElement("div",{key:a,className:"OptionContainer",onClick:T},c.a.createElement("div",{className:"Option"},e))})))}),g=(t(76),function(e){var a=e.buttons,t=void 0===a?[]:a,n=e.cancelHandler,i=void 0===n?function(){}:n;return c.a.createElement("div",{className:"PopupButtons"},c.a.createElement("div",{className:"PopupButtons--CustomItems"},t.map(function(e,a){return c.a.createElement("div",{key:a,className:"PopupButton--Item",onClick:e.clickHandler},c.a.createElement("span",{className:"PopupButton--ItemTitle"},e.name))})),c.a.createElement("div",{key:t.length,className:"PopupButtons--CancelItem",onClick:function(){i()}},c.a.createElement("span",{className:"PopupButton--ItemTitle"},"\u53d6\u6d88")))}),O=t(19),S=t.n(O),C=(t(87),function(e){var a=e.defaultSelectedValue,t=void 0===a?"":a,i=e.items,r=void 0===i?[]:i,o=e.customizeItemClickHandler,s=void 0===o?function(){}:o,m=e.isDisabled,u=void 0!==m&&m,d=Object(n.useState)(!1),E=Object(l.a)(d,2),v=E[0],p=E[1],f=Object(n.useState)(t),N=Object(l.a)(f,2),b=N[0],g=N[1];return Object(n.useEffect)(function(){var e=function(e){(e.target.getAttribute("class")||"").indexOf("DropdownList-Element")<0&&p(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[]),c.a.createElement("div",{className:"DropdownList DropdownList-Element ".concat(v?"DropdownList--Open":""," ").concat(u?"DropdownList--disabled":"")},c.a.createElement("div",{className:"DropdownHeader DropdownList-Element ".concat(v?"DropdownHeader--Open":""),onClick:function(){p(!v&&!u)}},b),v&&c.a.createElement("div",{className:"DropdownPanel DropdownList-Element"},r.map(function(e){return c.a.createElement("div",{className:"DropdownList__Item DropdownList-Element",key:e.key,onClick:function(){return function(e){p(!1),g(e.value),s(e)}(e)}},e.value)})))}),y=[{category:"\u4ea4\u901a",subcategory:"\u6253\u8f66"},{category:"\u751f\u6d3b",subcategory:"\u6c34\u7535\u7164\u6c14"},{category:"\u9a90\u9a90",subcategory:"\u73a9\u5177"},{category:"\u751f\u6d3b",subcategory:"\u751f\u6d3b\u7528\u54c1"},{category:"\u5468\u672b",subcategory:"\u665a\u9910"},{category:"\u5468\u672b",subcategory:"\u5348\u9910"}],h=function(e){return e<10?"0".concat(e):"".concat(e)},I=function(e,a,t){var n=[];return e&&n.push(e),a&&n.push(h(a)),t&&n.push(h(t)),n.join("-")},T=function(e){var a=[];return a.push(e.getFullYear()),a.push(h(e.getMonth())),a.push(h(e.getDate())),a.join("-")},A=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,a=e.getFullYear(),t=e.getMonth(),n=e.getDate(),c=e.getHours(),i=e.getMinutes(),r=e.getSeconds();return"".concat(a,"-").concat(h(t+1),"-").concat(h(n)," ").concat(h(c),":").concat(h(i),":").concat(h(r))},_=function(){for(var e=[],a=0;a<36;a++)e[a]="0123456789ABCDEF".substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]="0123456789ABCDEF".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var t=e.join("");return t},j=(t(88),[{key:0,value:"\u975e\u5468\u671f\u5165\u8d26"},{key:1,value:"\u6bcf\u5929\u5165\u8d26"},{key:2,value:"\u6bcf\u5468\u5165\u8d26"},{key:3,value:"\u6bcf\u6708\u5165\u8d26"},{key:4,value:"\u6bcf\u5e74\u5165\u8d26"}]),D=Object(o.b)(function(e){return{updatedCatGroup:(e.fin||{}).updatedCatGroup||{}}})(function(e){var a=e.item,t=void 0===a?{}:a,i=e.updatedCatGroup,r=e.dispatch,o=Object(n.useState)(Object(p.a)({},t,i)),s=Object(l.a)(o,2),u=s[0],d=s[1],E=Object(n.useState)([]),v=Object(l.a)(E,2),N=v[0],O=v[1],h=Object(n.useState)(!1),I=Object(l.a)(h,2),T=I[0],A=I[1],D=Object(n.useState)(!1),F=Object(l.a)(D,2),k=F[0],L=F[1],R=!!t.id;Object(n.useEffect)(function(){m.a.get("/api/wacai/getAllComment").then(function(e){var a=e.data.data||[],t=[];a.forEach(function(e){t.push(e.comment)}),O(t)}),r({type:"RESET_UPDATED_CAT_GROUP"})},[]);var w=function(e,a){d(Object.assign({},u,{category:e,subcategory:a}))},M=function(){A(!1),L(!1)},H=[{name:"\u53ea\u5220\u9664\u8fd9\u4e00\u7b14",clickHandler:function(){A(!1),m.a.delete("/api/wacai/deleteFinItem?id=".concat(u.id)).then(function(){r({type:"RESET_SELECTED_ITEM"})},function(e){401===e.response.status&&r({type:"TOKEN_INVALID"})})}},{name:"\u5220\u9664\u8fd9\u4e00\u7b14\u4ee5\u53ca\u4ee5\u540e\u6240\u6709",clickHandler:function(){A(!1);var e=new Date;m.a.delete("/api/wacai/deleteScheduledFinItem?scheduleId=".concat(u.scheduleId,"&year=").concat(e.getFullYear(),"&month=").concat(e.getMonth(),"&day=").concat(e.getDate())).then(function(){r({type:"RESET_SELECTED_ITEM"})},function(e){401===e.response.status&&r({type:"TOKEN_INVALID"})})}}],x=[{name:"\u53ea\u66f4\u65b0\u8fd9\u4e00\u7b14",clickHandler:function(){L(!1);var e=Object(p.a)({},u);m.a.post("/api/wacai/updateFinItem",{data:e}).then(function(){r({type:"RESET_SELECTED_ITEM"})})}},{name:"\u66f4\u65b0\u8fd9\u4e00\u7b14\u4ee5\u53ca\u4ee5\u540e\u6240\u6709",clickHandler:function(){L(!1);var e=Object(p.a)({},u),a={},t=new Date;a.scheduledId=e.scheduledId,a.year=t.getFullYear(),a.month=t.getMonth(),a.day=t.getDate(),m.a.post("/api/wacai/updateScheduledFinItem",{data:e,options:a}).then(function(){r({type:"RESET_SELECTED_ITEM"})})}}];return c.a.createElement("div",{className:"FinItemDetails"},c.a.createElement("div",{className:"Fin-Nav"},c.a.createElement("div",{className:"Fin-Nav-Out"},"\u652f\u51fa"),c.a.createElement("div",{className:"Fin-Nav-Arrow"})),c.a.createElement("div",{className:"Fin-Date Fin-WhiteBack"},c.a.createElement(S.a,{value:new Date(u.date.replace(/-/g,"/")),defaultValue:new Date,onChange:function(e){var a=e.format("YYYY-MM-DD hh:mm:ss");d(Object.assign({},u,{date:a}))},inputProps:{disabled:R&&u.isScheduled>0}})),c.a.createElement("div",{className:"Fin-Schedule Fin-WhiteBack"},c.a.createElement(C,{isDisabled:R,defaultSelectedValue:j[u.isScheduled||0].value,items:j,customizeItemClickHandler:function(e){var a=e.key;d(Object.assign({},u,{isScheduled:a}))}})),c.a.createElement("div",{className:"Fin-Header Fin-WhiteBack"},c.a.createElement("div",{className:"Fin-SubCat",onClick:function(){r({type:"CHANGE_TO_CATEGORY_SELECTION",selectedCatGroup:{category:u.category,subcategory:u.subcategory}})}},c.a.createElement("div",{className:"Category"},u.category),c.a.createElement("div",{className:"SubCategory"},u.subcategory)),c.a.createElement("div",{className:"Fin-Amount"},c.a.createElement("input",{type:"number",onFocus:function(e){u.amount?e.target.value=u.amount:e.target.value=""},onBlur:function(e){e.target.value=parseFloat(u.amount).toFixed(2)},onChange:function(e){var a=parseFloat(e.target.value);Number.isNaN(a)&&(a=0),d(Object.assign({},u,{amount:a}))},defaultValue:parseFloat(u.amount).toFixed(2)||0}))),c.a.createElement("div",{className:"Fin-ComCats Fin-WhiteBack"},c.a.createElement("div",{className:"Fin-ComCat-Container"},y.map(function(e,a){return c.a.createElement("div",{className:"Fin-ComCat",key:a},c.a.createElement(f,{category:e.category,subcategory:e.subcategory,onClickHandler:w}))}))),c.a.createElement("div",{className:"Fin-Comment Fin-WhiteBack"},c.a.createElement(b,{optionList:N,placeholder:"\u5907\u6ce8",onChangeCallback:function(e){d(Object.assign({},u,{comment:e}))},defaultValue:u.comment})),c.a.createElement("div",{className:"Fin-Toolbar Fin-WhiteBack"},c.a.createElement("div",{className:"Fin-Btns"},c.a.createElement("div",{className:"Fin-Btn Fin-BackBtn",onClick:function(){r({type:"RESET_SELECTED_ITEM"})}},"\u8fd4\u56de"),u.id&&c.a.createElement("div",{className:"Fin-Btn Fin-DeleteBtn",onClick:function(){u.isScheduled>0?A(!0):m.a.delete("/api/wacai/deleteFinItem?id=".concat(u.id)).then(function(){r({type:"RESET_SELECTED_ITEM"})},function(e){401===e.response.status&&r({type:"TOKEN_INVALID"})})}},"\u5220\u9664"),c.a.createElement("div",{className:"Fin-Btn Fin-SaveBtn",onClick:function(){var e=function(e){var a=e.category,t=e.subcategory,n=(e.comment,e.amount);return a&&t?n?null:{errorMsg:"\u8bf7\u8f93\u5165\u6709\u6548\u91d1\u989d\uff01"}:{errorMsg:"\u8bf7\u9009\u62e9\u7c7b\u522b\uff01"}}(u);if(e)r({type:"SET_ERROR_MESSAGE",message:e.errorMsg});else{var a="",t={};u.id?u.isScheduled>0?L(!0):(a="/api/wacai/updateFinItem",t=Object(p.a)({},u)):u.isScheduled>0?(a="/api/wacai/createScheduledFinItem",t=Object(p.a)({},u)):(a="/api/wacai/createFinItem",t=Object(p.a)({},u,{id:_()})),m.a.post(a,{data:t}).then(function(){r({type:"RESET_SELECTED_ITEM"})})}}},"\u4fdd\u5b58"))),T&&c.a.createElement("div",{className:"PopupButtons--Container"},c.a.createElement(g,{buttons:H,cancelHandler:M})),k&&c.a.createElement("div",{className:"PopupButtons--Container"},c.a.createElement(g,{buttons:x,cancelHandler:M})))}),F=(t(89),Object(o.b)()(function(e){var a=e.closeHandler,t=e.hasSearch,n=void 0===t||t,i=e.barTitle,r=void 0===i?"":i,l=e.searchHandler,o=e.children,s=e.dispatch;return c.a.createElement("div",{className:"HeaderToolbar"},c.a.createElement("div",{className:"HeaderToolbar-Container"},c.a.createElement("div",{className:"CloseBtn",onClick:function(){a?a():s({type:"CHANGE_TO_MAIN"})}}),r&&c.a.createElement("div",{className:"BarInfo"},r),!r&&o&&"function"===typeof o&&c.a.createElement("div",{className:"BarContent"},o()),!r&&!o&&c.a.createElement("div",{className:"BarHeader"}),n&&c.a.createElement("div",{className:"ToolBtns"},c.a.createElement("div",{className:"SearchBtn",onClick:function(){l?l():s({type:"OPEN_SEARCH_FIN_MODE"})}}))))})),k=(t(90),Object(o.b)(function(e){return{selectedCatGroup:e.fin.selectedCatGroup||{}}})(function(e){var a=e.selectedCatGroup,t=void 0===a?{}:a,i=e.dispatch,r=Object(n.useState)(t.category||""),o=Object(l.a)(r,2),s=o[0],u=o[1],d=Object(n.useState)({}),E=Object(l.a)(d,2),v=E[0],p=E[1];Object(n.useEffect)(function(){m.a.get("/api/wacai/getCategoryGroup").then(function(e){var a=e.data.data||{};p(a)},function(e){401===e.response.status&&i({type:"TOKEN_INVALID"})})},[]);return c.a.createElement("div",{className:"FinCatSubCat"},c.a.createElement(F,{barTitle:"\u652f\u51fa\u7c7b\u522b",hasSearch:!1}),c.a.createElement("div",{className:"FinCatSubCat-Container"},c.a.createElement("div",{className:"Cats"},Object.keys(v).map(function(e,a){return c.a.createElement("div",{className:"CatItem",key:a,onClick:function(){return function(e){u(e)}(e)}},c.a.createElement("div",{className:"CatItem-Border ".concat(s===e?"CatItem-Border-Selected":"")},e))})),c.a.createElement("div",{className:"SubCats"},s&&v[s]&&v[s].map(function(e,a){var t=e.subcategory;return e.isCommon,c.a.createElement("div",{className:"SubCatItem",onClick:function(){i({type:"CATEGORY_SELECTION_DONE",updatedCatGroup:{category:s,subcategory:t}})},key:a},c.a.createElement("div",{className:"".concat(a!==v[s].length-1?"SubCat-Border":"")},c.a.createElement("div",{className:"SubCat-Text"},t)))}))))})),L=(t(91),function(e){var a=e.date,t=void 0===a?"2019-04-22":a,n=e.amount,i=void 0===n?1203:n,r=e.items,l=void 0===r?[]:r,o=t.substring(t.length-2);return c.a.createElement("div",{className:"DayExpense"},c.a.createElement("div",{className:"DayExpense-Container"},c.a.createElement("div",{className:"DayInfo"},o),c.a.createElement("div",{className:"DayExpenseInfo"},c.a.createElement("div",{className:"DayHeader"},c.a.createElement("div",{className:"DayHeader-Weekday"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2019-04-22";return["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"][new Date(e).getDay()]}(t)),c.a.createElement("div",{className:"DayExpenseAmount"},"\u652f\uff1a",parseFloat(i).toFixed(2))),c.a.createElement("div",{className:"DayExpenseList"},l.map(function(e,a){return c.a.createElement("div",{key:e.id},c.a.createElement(E,{dayMode:!0,isLast:a===l.length-1,item:e}))})))))}),R=(t(92),Object(o.b)()(function(e){var a=e.month,t=void 0===a?"04":a,i=e.year,r=void 0===i?"2019":i,o=e.amount,s=void 0===o?11086:o,u=e.barWidthRatio,E=void 0===u?1:u,v=e.dayItems,p=void 0===v?[]:v,f=e.dispatch,N=Object(n.useState)(!1),b=Object(l.a)(N,2),g=b[0],O=b[1],S=Object(n.useState)(p),C=Object(l.a)(S,2),y=C[0],h=C[1],I=Object(n.useState)(!1),T=Object(l.a)(I,2),A=T[0],_=T[1],j=1*E*100+"%";return c.a.createElement("div",{className:"MonthExpense"},c.a.createElement("div",{className:"MonthExpense-Container ".concat(g?"":"MonthExpenseBorder"),onClick:function(){g?O(!g):(O(!g),y.length<=0&&(_(!0),m.a.get("/api/wacai/getFinItemsByMonth?month=".concat(t,"&year=").concat(r)).then(function(e){var a=e.data.data||[];h(a),setTimeout(function(){_(!1)},1500)},function(e){401===e.response.status&&f({type:"TOKEN_INVALID"})})))}},c.a.createElement("div",{className:"MonthTitle"},c.a.createElement("div",{className:"Month"},t),c.a.createElement("div",{className:"Year"},r)),c.a.createElement("div",{className:"MonthExpense"},c.a.createElement("div",{className:"ExpenseTitle"},"\u652f\u51fa\uff1a",parseFloat(s).toFixed(2)),c.a.createElement("div",{className:"ExpenseAmount"},c.a.createElement("div",{className:"AmountBar",style:{width:j}}))),c.a.createElement("div",{className:"MonthExpense-Dropdown ".concat(g?"MonthExpense-Expanded":"")})),g&&(A?c.a.createElement(d,null):y.map(function(e,a){return c.a.createElement("div",{key:a},c.a.createElement(L,{date:e.date,amount:e.amount,items:e.items}))})))})),w=(t(93),Object(o.b)()(function(e){var a=e.dispatch,t=Object(n.useState)({}),i=Object(l.a)(t,2),r=i[0],o=i[1];return Object(n.useEffect)(function(){var e=new Date;m.a.get("/api/wacai/getHistoryExpense?year=".concat(e.getFullYear(),"&month=").concat(e.getMonth()+1)).then(function(e){var a=e.data.data||{};o(a)},function(e){401===e.response.status&&a({type:"TOKEN_INVALID"})})},[]),c.a.createElement("div",{className:"FinItemList"},c.a.createElement(F,null),r.items&&r.items.map(function(e,a){return c.a.createElement("div",{key:a},c.a.createElement(R,{month:e.month,year:e.year,amount:e.amount,barWidthRatio:e.amount/r.highestMonthAmount}))}))})),M=(t(94),Object(o.b)()(function(e){var a=e.dispatch;return c.a.createElement("div",{className:"TemplateToolbar"},c.a.createElement("div",{className:"ToolbarContainer"},c.a.createElement("div",{className:"ToolbarInfo"},"\u8bb0\u8d26\u6a21\u677f"),c.a.createElement("div",{className:"ToolbarBtns"},c.a.createElement("div",{className:"CreateBtn",onClick:function(){a({type:"CREATE_TEMPLATE"})}},"\u6dfb\u52a0\u6a21\u677f"))))})),H=(t(95),Object(o.b)()(function(e){var a=e.item,t=void 0===a?{}:a,n=e.isLast,i=void 0!==n&&n,r=e.dispatch,l=t.comment,o=t.category,s=t.subcategory;return c.a.createElement("div",{className:"FinTemplateItem"},c.a.createElement("div",{className:"ItemContainer ".concat(i?"":"ItemBorder"),onClick:function(){r({type:"SELECT_ITEM",item:{comment:l,category:o,subcategory:s,amount:0}})}},c.a.createElement("div",{className:"Categories"},c.a.createElement("div",{className:"Category"},o),c.a.createElement("div",{className:"SubCategory"},s)),c.a.createElement("div",{className:"Comment"},l)))})),x=(t(96),Object(o.b)(function(e){var a=e.fin||{};return{updatedCatGroup:a.updatedCatGroup||{},isCreatingTemplate:a.isCreatingTemplate}})(function(e){var a=e.updatedCatGroup,t=void 0===a?{}:a,i=(e.isCreatingTemplate,e.dispatch),r=Object(n.useState)(t),o=Object(l.a)(r,2),s=o[0],u=o[1];Object(n.useEffect)(function(){i({type:"RESET_UPDATED_CAT_GROUP"})},[]);return c.a.createElement("div",{className:"CreateTemplate"},c.a.createElement("div",{className:"CreatePanel"},c.a.createElement("div",{className:"Fin-SubCat",onClick:function(){i({type:"CHANGE_TO_CATEGORY_SELECTION",selectedCatGroup:{category:s.category,subcategory:s.subcategory}})}},s.category," - ",s.subcategory),c.a.createElement("div",{className:"Fin-Comment"},c.a.createElement("input",{className:"CommentInput",placeholder:"\u5907\u6ce8",type:"input",onChange:function(e){u(Object.assign({},s,{comment:e.target.value}))},value:s.comment})),c.a.createElement("div",{className:"Fin-Toolbar"},c.a.createElement("div",{className:"Fin-Btns"},c.a.createElement("div",{className:"Fin-Btn Fin-BackBtn",onClick:function(){i({type:"CHANGE_TO_FIN_TEMPLATE_LIST"})}},"\u8fd4\u56de"),c.a.createElement("div",{className:"Fin-Btn Fin-SaveBtn",onClick:function(){s.category&&s.subcategory&&s.comment&&m.a.post("/api/wacai/createFinTemplate",{data:s}).then(function(){i({type:"CHANGE_TO_FIN_TEMPLATE_LIST"})},function(e){401===e.response.status&&i({type:"TOKEN_INVALID"})})}},"\u4fdd\u5b58")))))})),B=(t(97),Object(o.b)(function(e){return{isCreatingTemplate:(e.fin||{}).isCreatingTemplate}})(function(e){var a=e.isCreatingTemplate,t=e.dispatch,i=Object(n.useState)([]),r=Object(l.a)(i,2),o=r[0],s=r[1];return Object(n.useEffect)(function(){m.a.get("/api/wacai/getFinTemplates").then(function(e){var a=e.data.data||[];s(a)},function(e){401===e.response.status&&t({type:"TOKEN_INVALID"})})},[a]),c.a.createElement("div",{className:"FinTemplateList"},c.a.createElement(F,{barTitle:a?"\u521b\u5efa\u6a21\u677f":"",hasSearch:!1}),c.a.createElement(M,null),a?c.a.createElement(x,null):c.a.createElement("div",{className:"Templates"},o.map(function(e,a){return c.a.createElement("div",{key:a,className:"Template"},c.a.createElement(H,{item:e,isLast:a===o.length-1}))})))})),P=function(e){var a=e.total,t=e.start,i=void 0===t?0:t,r=e.duration,o=void 0===r?200:r,s=Object(n.useState)(i||function(e){return e<1e3?0:e<5e3?1e3:e<1e4?5e3:e<15e3?1e4:e<2e4?15e3:2e4}(a)),m=Object(l.a)(s,2),u=m[0],d=m[1],E=(a-u)/o,v=u;return Object(n.useEffect)(function(){var e=setInterval(function(){(v+=E)>=a&&(v=a,clearInterval(e)),d(v)},1)},[a]),c.a.createElement("div",{className:"AutoUpdateNumber"},parseFloat(u).toFixed(2))},G=(t(98),Object(o.b)()(function(e){var a=e.errorMsg,t=e.errorTimeout,i=void 0===t?1e3:t,r=e.dispatch,o=Object(n.useState)(!0),s=Object(l.a)(o,2),m=s[0],u=s[1];return Object(n.useEffect)(function(){u(!1),setTimeout(function(){u(!0),setTimeout(function(){r({type:"RESET_ERROR_MESSAGE"})},1e3)},i)},[]),c.a.createElement("div",{className:"ErrorNotification ".concat(m?"fadeOutAnimation":"")},c.a.createElement("div",{className:"ErrorMessage-Container"},c.a.createElement("div",{className:"ErrorMessage"},a)))})),V=(t(99),Object(o.b)()(function(e){var a=e.customStyles,t=void 0===a?{}:a,i=e.advancedSearchHanlder,r=void 0===i?void 0:i,o=e.dispatch,s=Object(n.useState)(""),u=Object(l.a)(s,2),d=u[0],E=u[1];return c.a.createElement("div",{className:"SearchBox",style:t},c.a.createElement("div",{className:"SearchBox-Container"},c.a.createElement("div",{className:"AdvanceSearch"},c.a.createElement("div",{className:"AdvanceSearch-Text",onClick:function(){r&&r()}},"\u9ad8\u7ea7\u641c\u7d22")),c.a.createElement("div",{className:"SimpleSearch"},c.a.createElement("input",{placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u8bcd",onChange:function(e){E(e.target.value)},value:d}))),c.a.createElement("div",{className:"Btns"},c.a.createElement("div",{className:"SearchBtn",onClick:function(){d&&m.a.get("/api/wacai/searchFinItems?searchString=".concat(d)).then(function(e){var a=e.data.data||[];o({type:"SEARCH_FIN_RESULTS_LOADED",finItems:a})})}},"\u786e\u5b9a")))})),U=(t(100),function(e){var a=e.finItems,t=void 0===a?[]:a,n=0;return t.length>0&&t.forEach(function(e){n+=e.amount}),c.a.createElement("div",{className:"SearchFinItemList"},c.a.createElement("div",{className:"SearchResultContainer"},c.a.createElement("div",{className:"SearchResult-Summary"},c.a.createElement("div",{className:"SummaryItem SummaryAmount"},"\uffe5 ",parseFloat(n).toFixed(2)),c.a.createElement("div",{className:"SummaryItem SummaryCaption"},"\u652f\u51fa"))),c.a.createElement("div",{className:"ListContainer"},t.map(function(e,a){return c.a.createElement("div",{className:"ListItemContainer",key:a},c.a.createElement(E,{item:e}))})))}),Y=(t(101),Object(o.b)(function(e){return{searchParams:(e.search||{}).searchParams||{}}})(function(e){var a,t=e.type,i=e.name,r=e.Comp,o=e.defaultValue,s=e.formatter,m=void 0===s?function(e){return e}:s,u=e.searchParams,d=e.dispatch,E=Object(n.useState)(!1),v=Object(l.a)(E,2),p=v[0],f=v[1];return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"AdvanceSearchItem ".concat(p&&r?"AdvanceSearchItem-NoBottomBorder":"")},c.a.createElement("div",{className:"ItemName"},c.a.createElement("span",null,i)),c.a.createElement("div",{className:"ItemOption"},c.a.createElement("div",{className:"ItemOption-Container",onClick:function(){f(!p)}},c.a.createElement("div",{className:"ItemSelectedValue"},u[t]?(a=u[t],m?m(a):a):o),c.a.createElement("div",{className:"ItemSelectionButton"},">")))),p&&r&&c.a.createElement(r,{currentValue:u[t],submitHandler:function(e){!function(e){d({type:"SET_ADVANCE_SEARCH_PARAM",itemType:t,itemValue:e})}(e),f(!1)},cancelHandler:function(){f(!1)}}))})),W=t(13),K=(t(102),function(e){var a=e.enableSubmitButton,t=void 0===a||a,n=e.enableCancelButton,i=void 0===n||n,r=e.submitHandler,l=void 0===r?void 0:r,o=e.cancelHandler,s=void 0===o?void 0:o;return c.a.createElement("div",{className:"Selection__ButtonGroups"},t&&c.a.createElement("div",{className:"SubmitButton",onClick:l},"\u786e\u8ba4"),i&&c.a.createElement("div",{className:"CancelButton",onClick:s},"\u53d6\u6d88"))}),z=Object(o.b)()(function(e){var a=e.currentValue,t=void 0===a?{}:a,i=e.submitHandler,r=void 0===i?void 0:i,o=e.cancelHandler,s=void 0===o?void 0:o,u=e.dispatch,d=Object(n.useState)(t.category||"\u5168\u90e8"),E=Object(l.a)(d,2),v=E[0],p=E[1],f=Object(n.useState)(t.subcategory||"\u5168\u90e8"),N=Object(l.a)(f,2),b=N[0],g=N[1],O=Object(n.useState)({}),S=Object(l.a)(O,2),y=S[0],h=S[1],I=Object(n.useState)("\u5168\u90e8"===(t.category||"\u5168\u90e8")),T=Object(l.a)(I,2),A=T[0],_=T[1],j=Object(n.useState)([]),D=Object(l.a)(j,2),F=D[0],k=D[1],L=Object(n.useState)([]),R=Object(l.a)(L,2),w=R[0],M=R[1];Object(n.useEffect)(function(){m.a.get("/api/wacai/getCategoryGroup").then(function(e){var a=e.data.data||{};h(a);var t=function(e){var a=Object.keys(e);return(a=a.map(function(e,a){return{key:a+1,value:e}})).unshift({key:0,value:"\u5168\u90e8"}),a}(a);k(t)},function(e){401===e.response.status&&u({type:"TOKEN_INVALID"})})},[]);return c.a.createElement("div",{className:"CategorySelectionPanel"},c.a.createElement("div",{className:"CategorySelectionContainer"},c.a.createElement("div",{className:"CategoryTitle"},"\u7c7b\u522b"),c.a.createElement("div",{className:"CategorySelection"},c.a.createElement(C,{defaultSelectedValue:v,items:F,customizeItemClickHandler:function(e){p(e.value);var a=[{key:0,value:"\u5168\u90e8"}];if("\u5168\u90e8"===e.value)M(a),_(!1);else{var t=y[e.value];t=t.map(function(e,a){return{key:a+1,value:e.subcategory}}),M([].concat(a,Object(W.a)(t))),_(!1)}}}))),c.a.createElement("div",{className:"SubCategorySelectionContainer"},c.a.createElement("div",{className:"SubCategoryTitle"},"\u5b50\u7c7b"),c.a.createElement("div",{className:"SubCategorySelection"},c.a.createElement(C,{defaultSelectedValue:b,isDisabled:A,items:w,customizeItemClickHandler:function(e){g(e.value)}}))),c.a.createElement(K,{submitHandler:function(){r({category:v,subcategory:b})},cancelHandler:function(){s()}}))}),J=[{type:"dateRange",name:"\u65e5\u671f",defaultValue:"\u5168\u90e8",comp:function(e){var a=e.currentValue,t=void 0===a?{}:a,i=e.submitHandler,r=void 0===i?function(){}:i,o=e.cancelHandler,s=void 0===o?function(){}:o,m=Object(n.useState)(t),u=Object(l.a)(m,2),d=u[0],E=u[1],v=Object(n.useState)(9===t.key),f=Object(l.a)(v,2),N=f[0],b=f[1],g=Object(n.useState)(9===t.key?new Date(t.minDate):new Date),O=Object(l.a)(g,2),y=O[0],h=O[1],A=Object(n.useState)(!1),_=Object(l.a)(A,2),j=_[0],D=_[1],F=Object(n.useState)(9===t.key?new Date(t.maxDate):new Date),k=Object(l.a)(F,2),L=k[0],R=k[1],w=Object(n.useState)(!1),M=Object(l.a)(w,2),H=M[0],x=M[1],B=new Date,P=B.getFullYear(),G=B.getMonth()+1,V=B.getDate(),U=B.getDay(),Y=function(e,a){switch(a){case 2:return e%4==0&&e%100||e%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}},W=function(e,a,t,n){if(t<n){var c=n-t;return{minDate:I(e,a-1,Y(e,a-1)-(c-1)),maxDate:I(e,a,t+(7-n))}}return{minDate:I(e,a,t-(n-1)),maxDate:I(e,a,t+(7-n))}},z=[{key:0,value:"\u5168\u90e8"},{key:1,value:"\u672c\u5e74",minDate:P,maxDate:P+1},{key:2,value:"\u53bb\u5e74",minDate:P-1,maxDate:P},{key:3,value:"\u672c\u5b63",minDate:I(P,G-G%3),maxDate:I(P,G+(3-G%3))},Object(p.a)({key:4,value:"\u4e0a\u5b63"},function(e,a){return a<3?{minDate:I(e-1,9),maxDate:I(e-1,12)}:{minDate:I(e,a-a%3-3),maxDate:I(e,a+(3-a%3)-3)}}(P,G)),{key:5,value:"\u672c\u6708",minDate:I(P,G,1),maxDate:I(P,G,Y(P,G))},Object(p.a)({key:6,value:"\u4e0a\u6708"},function(e,a){return 1===a?{minDate:I(e-1,12,1),maxDate:I(e-1,12,31)}:{minDate:I(e,a-1,1),maxDate:I(e,a-1,Y(e,a-1))}}(P,G)),Object(p.a)({key:7,value:"\u672c\u5468"},W(P,G,V,U)),Object(p.a)({key:8,value:"\u4e0a\u5468"},function(e,a,t,n){return t-7<=0?Object(p.a)({},W(e,a-1,Y(e,a-1)-(7-t),n)):Object(p.a)({},W(e,a,t-7,n))}(P,G,V,U)),{key:9,value:"\u81ea\u5b9a\u4e49"}];return c.a.createElement("div",{className:"DateRangeSelectionPanel"},c.a.createElement("div",{className:"DateRangeDropdownList"},c.a.createElement(C,{items:z,defaultSelectedValue:d.value||"\u5168\u90e8",customizeItemClickHandler:function(e){e.key<9?b(!1):b(!0),E(z[e.key])}})),N&&c.a.createElement("div",{className:"DateRangeSelection--Custom"},c.a.createElement("div",{className:"DateRangeSelection DateRangeSelection--CustomStart"},c.a.createElement("div",{className:"StartDateContainer",onClick:function(){D(!j)}},c.a.createElement("div",{className:"Title"},"\u8d77\u59cb\u65f6\u95f4"),c.a.createElement("div",{className:"Value"},T(y))),j&&c.a.createElement(S.a,{input:!1,value:y,defaultValue:y,onChange:function(e){var a=e.format("YYYY-MM-DD");h(new Date(a)),D(!j)},className:"DateTimeStyles"})),c.a.createElement("div",{className:"DateRangeSelection DateRangeSelection--CustomEnd"},c.a.createElement("div",{className:"EndDateContainer",onClick:function(){x(!H)}},c.a.createElement("div",{className:"Title"},"\u7ec8\u6b62\u65f6\u95f4"),c.a.createElement("div",{className:"Value"},T(L))),H&&c.a.createElement(S.a,{input:!1,value:L,defaultValue:L,onChange:function(e){var a=e.format("YYYY-MM-DD");R(new Date(a)),x(!H)},className:"DateTimeStyles"}))),c.a.createElement(K,{submitHandler:function(){9===d.key?r(Object(p.a)({},d,{minDate:y,maxDate:L})):r(d)},cancelHandler:function(){s()}}))},formatter:function(e){if(e.minDate&&e.maxDate){var a="object"===typeof e.minDate?T(e.minDate):e.minDate,t="object"===typeof e.maxDate?T(e.maxDate):e.maxDate;return"".concat(a," - ").concat(t)}return"\u5168\u90e8"}},{type:"amountRanges",name:"\u91d1\u989d",defaultValue:"",comp:Object(o.b)()(function(e){var a=e.currentValue,t=void 0===a?[]:a,i=e.submitHandler,r=void 0===i?function(){}:i,o=e.cancelHandler,s=void 0===o?function(){}:o,m=e.dispatch,u=Object(n.useState)(t),d=Object(l.a)(u,2),E=d[0],v=d[1];return c.a.createElement("div",{className:"AmountRangeSelectionPanel"},c.a.createElement("div",{className:"AmountRangeAdder",onClick:function(){v([].concat(Object(W.a)(E),[{minAmount:0,maxAmount:0}]))}},"+"),c.a.createElement("div",{className:"AmountRangeContainer"},E.map(function(e,a){var t=e.minAmount,n=e.maxAmount;return c.a.createElement("div",{className:"AmountRangeItem",key:a},c.a.createElement("div",{className:"AmountRangeMain"},c.a.createElement("input",{className:"AmountRangeItem--Min",onChange:function(e){return function(e,a){var t=Object(W.a)(E),n=e.target.value;t[a].minAmount=n,v(Object(W.a)(t))}(e,a)},value:t}),c.a.createElement("div",{className:"AmountRangeItem--Sep"}," - "),c.a.createElement("input",{className:"AmountRangeItem--Max",onChange:function(e){return function(e,a){var t=Object(W.a)(E),n=e.target.value;t[a].maxAmount=n,v(Object(W.a)(t))}(e,a)},value:n})),c.a.createElement("div",{className:"AmountRangeRemover",onClick:function(){!function(e){var a=Object(W.a)(E);a.splice(e,1),v(Object(W.a)(a))}(a)}},"-"))})),c.a.createElement(K,{submitHandler:function(){for(var e in E)if(E[e].minAmount>E[e].maxAmount&&0!=E[e].maxAmount)return void m({type:"SET_ERROR_MESSAGE",message:"\u91d1\u989d\u533a\u95f4\u8bbe\u7f6e\u6709\u8bef"});r(E)},cancelHandler:function(){s()}}))}),formatter:function(e){return e.map(function(e){var a=e.minAmount,t=e.maxAmount;return 0===+t?">= ".concat(a):"".concat(a," - ").concat(t)}).join(", ")}},{type:"category",name:"\u7c7b\u522b",defaultValue:"\u5168\u90e8",comp:z,formatter:function(e){var a=e.category,t=e.subcategory;return"".concat(a," - ").concat(t)}},{type:"keyword",name:"\u5173\u952e\u5b57",defaultValue:"",comp:function(e){var a=e.currentValue,t=void 0===a?"":a,i=e.submitHandler,r=void 0===i?void 0:i,o=e.cancelHandler,s=void 0===o?void 0:o,m=Object(n.useState)(t),u=Object(l.a)(m,2),d=u[0],E=u[1];return c.a.createElement("div",{className:"KeywordsSelectionPanel"},c.a.createElement("div",{className:"InputContainer"},c.a.createElement("input",{onChange:function(e){E(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57",value:d})),c.a.createElement(K,{submitHandler:function(){r(d)},cancelHandler:function(){s()}}))},formatter:function(e){return e}}],X=(t(103),Object(o.b)(function(e){return{searchParams:(e.search||{}).searchParams||{}}})(function(e){var a=e.searchParams,t=e.dispatch,n=e.submitHandler,i=void 0===n?void 0:n;return c.a.createElement("div",{className:"AdvancedSearch"},c.a.createElement("div",{className:"AdvancedSearch-Toolbar"},c.a.createElement("div",{className:"SubmitButton",onClick:function(){var e=[];Object.keys(a).map(function(t){if(Array.isArray(a[t]))e.push("".concat(t,"=").concat(JSON.stringify(a[t])));else if("object"===typeof a[t]){if("dateRange"===t)e.push("".concat(t,"=").concat(JSON.stringify(a[t])));else if("category"===t)for(var n in a[t])e.push("".concat(n,"=").concat(a[t][n]))}else e.push("".concat(t,"=").concat(a[t]))}),m.a.get("/api/wacai/deepSearchFinItems?".concat(e.join("&"))).then(function(e){var a=e.data;i();var n=a.data||[];t({type:"SEARCH_FIN_RESULTS_LOADED",finItems:n})})}},"\u786e\u8ba4"),c.a.createElement("div",{className:"clearFloat"})),J&&J.map(function(e,a){var t=e.type,n=e.name,i=e.comp,r=e.defaultValue,l=e.formatter;return c.a.createElement("div",{className:"AdvanceSearchItem-Container",key:a},c.a.createElement(Y,{type:t,name:n,Comp:i,defaultValue:r,formatter:l}))}))})),q=(t(104),Object(o.b)(function(e){return{finItems:(e.search||{}).finItems||[]}})(function(e){var a=e.finItems,t=void 0===a?[]:a,i=e.dispatch,r=Object(n.useState)(!1),o=Object(l.a)(r,2),s=o[0],m=o[1],u={position:"relative",top:"50%",transform:"translateY(-50%)"},d=function(){m(!0)};return c.a.createElement("div",{className:"SearchFinItem"},c.a.createElement(F,{closeHandler:function(){s?m(!1):i({type:"CHANGE_TO_FIN_HISTORY"})},hasSearch:!1,barTitle:s?"\u9ad8\u7ea7\u641c\u7d22":""},function(){return s?null:c.a.createElement(V,{customStyles:u,advancedSearchHanlder:d})}),!s&&t.length>0&&c.a.createElement(U,{finItems:t}),s&&c.a.createElement("div",{className:"AdvancedSearch-Container"},c.a.createElement(X,{submitHandler:function(){m(!1)}})))})),$=(t(105),Object(o.b)(function(e){return{selectedItem:e.fin?e.fin.selectedItem:null,pageIndex:e.fin?e.fin.pageIndex:"MAIN",errorMsg:e.errorMsg?e.errorMsg.message:""}})(function(e){var a=e.pageIndex,t=e.errorMsg,i=e.selectedItem,r=e.dispatch,o=Object(n.useState)(0),s=Object(l.a)(o,2),u=s[0],d=s[1],E=Object(n.useState)(new Array(5).fill({})),p=Object(l.a)(E,2),f=p[0],N=p[1],b=Object(n.useState)(!0),g=Object(l.a)(b,2),O=g[0],S=g[1];Object(n.useEffect)(function(){if(S(!0),!i){var e=new Date;m.a.get("/api/wacai/getFinList?year=".concat(e.getFullYear(),"&month=").concat(e.getMonth()+1)).then(function(e){var a=e.data;setTimeout(function(){S(!1);var e=a.total||0,t=a.data||[];N(t),d(e)},500)},function(e){var a=e.response;S(!1),401===a.status&&r({type:"TOKEN_INVALID"})})}},[i]);return c.a.createElement("div",{className:"App"},t&&c.a.createElement("div",{className:"App-Page-Error-Notification"},c.a.createElement(G,{errorMsg:t})),"SEARCH_FIN_ITEM"===a&&c.a.createElement("div",{className:"App-Page-Fin-Search"},c.a.createElement(q,null)),"CATEGORY_SELECTION"===a&&c.a.createElement("div",{className:"App-Page-Cat-Selection"},c.a.createElement(k,null)),"FIN_HISTORY"===a&&c.a.createElement("div",{className:"App-Page-Fin-History"},c.a.createElement(w,null)),"FIN_TEMPLATE_LIST"===a&&c.a.createElement("div",{className:"App-Page-Fin-Template-List"},c.a.createElement(B,null)),"MAIN"===a&&c.a.createElement("div",{className:"App-Page-Main"},c.a.createElement("div",{className:"App-Header"},c.a.createElement("div",{className:"Header-MonthTotal"},c.a.createElement("div",{className:"Caption"},"\u672c\u6708\u603b\u8ba1"),c.a.createElement("div",{className:"Amount",onClick:function(){r({type:"CHANGE_TO_FIN_HISTORY"})}},c.a.createElement(P,{total:u,duration:100})))),i?c.a.createElement("div",{className:"App-FinDetails"},c.a.createElement(D,{item:i})):c.a.createElement("div",{className:"App-Main"},c.a.createElement(v,{isLoading:O,items:f}))))})),Q=(t(106),t(107),new Array(4).fill(void 0)),Z=Object(o.b)()(function(e){e.dispatch;var a=Object(n.useState)(""),t=Object(l.a)(a,2),i=t[0],r=t[1],o=Object(n.useState)(Q),s=Object(l.a)(o,2),u=s[0],d=s[1],E=function(e){var a=e.target.files[0],t=+e.target.parentElement.getAttribute("data-fileid");d(u.map(function(e,n){return n===t?a:e})),function(e){var a=new FormData;return a.append("file",e),m.a.post("/api/file/imageUpload",a)}(a).then(function(e){console.log(e)},function(e){console.log(e)})};return c.a.createElement("div",{className:"FileUploader"},c.a.createElement("div",{className:"NameInput"},c.a.createElement("input",{type:"input",placeholder:"Please input your name...",value:i,onChange:function(e){var a=e.target.value;r(a)}})),c.a.createElement("div",{className:"ImageUploader"},c.a.createElement("div",{className:"ImageUploadSpace"},u.map(function(e,a){return c.a.createElement("div",{className:"ImageUploadFrame",key:a,"data-fileId":a},c.a.createElement("input",{className:"FileUpload__Input MyWacai-File-Uploader ".concat(e?"FileUpload--Transparent":""),type:"file",name:"file",onChange:E}),e&&c.a.createElement("div",{className:"FileUpload__Name"},c.a.createElement("div",null,e.name)))}))),c.a.createElement("div",{className:"ButtonGroup"},c.a.createElement("div",{className:"SubmitButton Button"},"Submit"),c.a.createElement("div",{className:"CancelButton Button"},"Cancel")))}),ee=t(10),ae=t(40),te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ne(e,a){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var ce=t(17),ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SELECT_ITEM":return a.item.date||(a.item.date=A()),Object(p.a)({},e,{pageIndex:"MAIN",selectedItem:a.item});case"RESET_SELECTED_ITEM":return Object(p.a)({},e,{selectedItem:null});case"CREATE_ITEM":return Object(p.a)({},e,{selectedItem:{category:"\u5468\u672b",subcategory:"\u665a\u9910",date:A(),amount:0}});case"CHANGE_TO_CATEGORY_SELECTION":return Object(p.a)({},e,{pageIndex:"CATEGORY_SELECTION",selectedCatGroup:a.selectedCatGroup||{}});case"CHANGE_TO_MAIN":return Object(p.a)({},e,{pageIndex:"MAIN",updatedCatGroup:a.updatedCatGroup||{}});case"CATEGORY_SELECTION_DONE":var t="";return t=e.selectedItem?"MAIN":"FIN_TEMPLATE_LIST",Object(p.a)({},e,{pageIndex:t,updatedCatGroup:a.updatedCatGroup||{}});case"CHANGE_TO_FIN_HISTORY":return Object(p.a)({},e,{pageIndex:"FIN_HISTORY"});case"RESET_UPDATED_CAT_GROUP":return Object(p.a)({},e,{updatedCatGroup:{}});case"CHANGE_TO_FIN_TEMPLATE_LIST":return Object(p.a)({},e,{pageIndex:"FIN_TEMPLATE_LIST",isCreatingTemplate:!1});case"CREATE_TEMPLATE":return Object(p.a)({},e,{isCreatingTemplate:!0});case"OPEN_SEARCH_FIN_MODE":return Object(p.a)({},e,{pageIndex:"SEARCH_FIN_ITEM"});default:return e}},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SET_ERROR_MESSAGE":return Object(p.a)({},e,{message:a.message});case"RESET_ERROR_MESSAGE":return Object(p.a)({},e,{message:""});default:return e}},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case"LOGIN_SUCCESS":return Object(p.a)({},e,{loginStatus:!0});case"TOKEN_INVALID":return Object(p.a)({},e,{loginStatus:!1});default:return e}},oe=t(20),se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"SEARCH_FIN_RESULTS_LOADED":return Object(p.a)({},e,{finItems:a.finItems||[]});case"SET_ADVANCE_SEARCH_PARAM":var t=e.searchParams||{},n=a.itemType,c=a.itemValue;return Object(p.a)({},e,{searchParams:Object.assign({},Object(p.a)({},t,Object(oe.a)({},n,c)))});default:return e}},me=Object(ce.b)({fin:ie,errorMsg:re,login:le,search:se}),ue=(t(108),function(e){var a=e.loginSuccessCallback,t=Object(n.useState)(""),i=Object(l.a)(t,2),r=i[0],o=i[1],s=Object(n.useState)(""),u=Object(l.a)(s,2),d=u[0],E=u[1];return c.a.createElement("div",{className:"Login"},c.a.createElement("div",{className:"LoginContainer"},c.a.createElement("div",{className:"UsernameInput"},c.a.createElement("div",{className:"Username-Image"},c.a.createElement("input",{type:"input",placeholder:"\u7528\u6237\u540d",onChange:function(e){o(e.target.value)},value:r}))),c.a.createElement("div",{className:"PasswordInput"},c.a.createElement("div",{className:"Password-Image"},c.a.createElement("input",{type:"password",placeholder:"\u5bc6\u7801",onChange:function(e){E(e.target.value)},value:d}))),c.a.createElement("div",{className:"ButtonGroup"},c.a.createElement("div",{className:"SubmitButton",onClick:function(){if(r&&d){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_COOKIE_NAME:"DAVID_FIN",REACT_APP_USERNAME:"wanderyt",REACT_APP_PASSWORD:"password"}).REACT_SERVER_API_HOST||"";m.a.post("".concat(e,"/api/user/login"),{data:{username:r,password:d}}).then(function(){a&&a()})}}},"\u767b\u5f55"))))}),de=(t(109),Object(o.b)(function(e){return{loginStatus:(e.login||{}).loginStatus}})(function(e){var a=e.loginStatus,t=e.dispatch,i=e.children,r=function(){t({type:"LOGIN_SUCCESS"})};return Object(n.useEffect)(function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_COOKIE_NAME:"DAVID_FIN",REACT_APP_USERNAME:"wanderyt",REACT_APP_PASSWORD:"password"}).REACT_SERVER_API_HOST||"";void 0===a&&m.a.get("".concat(e,"/api/user/validateToken")).then(function(){r()},function(){t({type:"TOKEN_INVALID"})})},[]),void 0===a?null:c.a.createElement("div",{className:"LoginProvider"},a?i:c.a.createElement("div",{className:"App-Login"},c.a.createElement(ue,{loginSuccessCallback:r})))})),Ee=Object(ce.c)(me,{fin:{pageIndex:"MAIN"}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Object(ee.e)(function(e){var a=e.location,t=void 0===a?{pathname:""}:a;return c.a.createElement(c.a.Fragment,null,t.pathname.indexOf("fileUploader")>-1?c.a.createElement(Z,null):c.a.createElement($,null))});r.a.render(c.a.createElement(o.a,{store:Ee},c.a.createElement(de,null,c.a.createElement(ae.a,null,c.a.createElement(function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(ee.a,{exact:!0,path:"/",component:$,key:"App"}),c.a.createElement(ee.a,{path:"/fileUploader",component:Z,key:"FileUploader"}))},null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var a="".concat("","/service-worker.js");te?(function(e,a){fetch(e).then(function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ne(e,a)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(a,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):ne(a,e)})}}()}]),[[41,1,2]]]);
//# sourceMappingURL=main.05dda752.chunk.js.map