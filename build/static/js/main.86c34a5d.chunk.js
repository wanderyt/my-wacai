(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(41).concat([function(e,t,a){},,,function(e){e.exports={a:["asfasdf","asd","asax","adsFAS","retvc","tybxcvb","ytrnv","tuvnb","bmui","ewqvzz"]}},,,function(e,t,a){e.exports=a(123)},,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(14),o=a.n(i),r=(a(52),a(1)),l=a(2),s=a(4),m=a.n(s),u=(a(76),function(){return c.a.createElement("div",{className:"FinListItem--LoadingState"},c.a.createElement("div",{className:"FinListItem--Left"},c.a.createElement("div",{className:"FinListItem__Cat"},c.a.createElement("div",{className:"LoadingState"})),c.a.createElement("div",{className:"FinListItem__Date"},c.a.createElement("div",{className:"LoadingState"})),c.a.createElement("div",{className:"FinListItem__Comment"},c.a.createElement("div",{className:"LoadingState"}))),c.a.createElement("div",{className:"FinListItem--Right"},c.a.createElement("div",{className:"FinListItem--Amount"},c.a.createElement("div",{className:"LoadingState"}))))}),d=(a(77),function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"DayExpense--Loading"},c.a.createElement("div",{className:"DayInfo"},c.a.createElement("div",{className:"LoadingState"})),c.a.createElement("div",{className:"DayExpenseInfo"},c.a.createElement("div",{className:"DayHeader"},c.a.createElement("div",{className:"DayHeader-Weekday"},c.a.createElement("div",{className:"LoadingState"})),c.a.createElement("div",{className:"DayExpenseAmount"},c.a.createElement("div",{className:"LoadingState"}))),c.a.createElement("div",{className:"DayExpenseList"},c.a.createElement(u,null),c.a.createElement(u,null)))),c.a.createElement("div",{className:"DayExpense--Loading"},c.a.createElement("div",{className:"DayInfo"},c.a.createElement("div",{className:"LoadingState"})),c.a.createElement("div",{className:"DayExpenseInfo"},c.a.createElement("div",{className:"DayHeader"},c.a.createElement("div",{className:"DayHeader-Weekday"},c.a.createElement("div",{className:"LoadingState"})),c.a.createElement("div",{className:"DayExpenseAmount"},c.a.createElement("div",{className:"LoadingState"}))),c.a.createElement("div",{className:"DayExpenseList"},c.a.createElement(u,null),c.a.createElement(u,null)))))}),E=(a(78),Object(l.b)()(function(e){var t=e.item,a=e.isLoading,n=e.dayMode,i=void 0!==n&&n,o=e.isLast,r=void 0!==o&&o,l=e.dispatch,s=t.category,m=t.subcategory,d=t.date,E=t.amount,v=t.comment,p=t.isScheduled;return c.a.createElement("div",{className:"FinItemPanel forbid-select",onClick:function(){l({type:"SELECT_ITEM",item:t})}},c.a.createElement("div",{className:"FinItem ".concat(r?"":"FinItem-Border")},a?c.a.createElement(u,null):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"Fin-Left"},c.a.createElement("div",{className:"Fin-SubCat"},s," - ",m),c.a.createElement("div",{className:"Fin-Info Fin-Date"},c.a.createElement("span",null,i?d.substring(11):d)),c.a.createElement("div",{className:"Fin-Info Fin-Comment"},p&&c.a.createElement("span",{className:"Fin-IsScheduled"},"\u5468\u671f"),c.a.createElement("span",null,v))),c.a.createElement("div",{className:"Fin-Right"},c.a.createElement("span",{className:"Fin-Amount"},parseFloat(E).toFixed(2))))))})),v=(a(79),Object(l.b)()(function(e){var t=e.isLoading,a=e.items,n=e.dispatch;return c.a.createElement("div",{className:"FinMain"},c.a.createElement("div",{className:"App-Toolbar"},c.a.createElement("div",{className:"App-Toolbtn"},c.a.createElement("div",{className:"App-Btn forbid-select App-CreateItem",onClick:function(){n({type:"CREATE_ITEM"})}},"\u8bb0\u4e00\u7b14"),c.a.createElement("div",{className:"App-Btn forbid-select App-CreateFast",onClick:function(){n({type:"CHANGE_TO_FIN_TEMPLATE_LIST"})}},"\u901f\u8bb0"))),c.a.createElement("div",{className:"App-Container"},c.a.createElement("div",{className:"App-FinList"},a.map(function(e,a){return c.a.createElement("div",{key:a},c.a.createElement(E,{isLoading:t,item:e}))}))))})),p=a(6),f=a(3),g=(a(80),function(e){var t=e.category,a=e.subcategory,n=e.onClickHandler,i=void 0===n?function(){}:n;return c.a.createElement("div",{className:"FinComCatItem",onClick:function(){return i(t,a)}},c.a.createElement("span",{className:"SubCat-Name"},a))}),N=a(44),b=(a(81),function(e){var t=e.optionList,a=void 0===t?N.a:t,i=e.filterFunction,o=e.placeholder,l=void 0===o?"":o,s=e.onChangeCallback,m=e.defaultValue,u=void 0===m?"":m,d=e.searchOptions,E=void 0===d?5:d,v=Object(n.useState)(u),p=Object(r.a)(v,2),f=p[0],g=p[1],b=Object(n.useState)([]),O=Object(r.a)(b,2),C=O[0],h=O[1],y=Object(n.useState)(!1),S=Object(r.a)(y,2),j=S[0],I=S[1];Object(n.useEffect)(function(){g(u);var e=function(e){var t=e.target.getAttribute("class")||"";t.indexOf("InputField")<0&&t.indexOf("OptionContainer")<0&&(I(!1),h([]))};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[u]);var A=function(e){var t=e.target.innerText;g(t),h([]),s&&s(t,!0)};return c.a.createElement("div",{className:"SearchDropdown"},c.a.createElement("div",{className:"Dropdown-Input ".concat(j?"SearchDropdown-Focused":"")},c.a.createElement("div",{className:"Dropdown-SearchImage"},c.a.createElement("input",{className:"InputField",placeholder:l,type:"input",onChange:function(e){var t=e.target.value,n=i(a,t)||[];I(!0),g(t),h(t?n.slice(0,E):[]),s&&s(t,!1)},value:f}))),c.a.createElement("div",{className:"OptionList ".concat(j?"SearchDropdown-Focused":"")},C&&C.length>0&&C.map(function(e,t){return c.a.createElement("div",{key:t,className:"OptionContainer",onClick:A},c.a.createElement("div",{className:"Option"},e))})))});b.defaultProps={filterFunction:function(){}};var O=b,C=(a(82),function(e){var t=e.buttons,a=void 0===t?[]:t,n=e.cancelHandler,i=void 0===n?function(){}:n;return c.a.createElement("div",{className:"PopupButtons"},c.a.createElement("div",{className:"PopupButtons--CustomItems"},a.map(function(e,t){return c.a.createElement("div",{key:t,className:"PopupButton--Item",onClick:e.clickHandler},c.a.createElement("span",{className:"PopupButton--ItemTitle"},e.name))})),c.a.createElement("div",{key:a.length,className:"PopupButtons--CancelItem",onClick:function(){i()}},c.a.createElement("span",{className:"PopupButton--ItemTitle"},"\u53d6\u6d88")))}),h=a(19),y=a.n(h),S=(a(93),function(e){var t=e.defaultSelectedValue,a=void 0===t?"":t,i=e.items,o=void 0===i?[]:i,l=e.customizeItemClickHandler,s=void 0===l?function(e){}:l,m=e.isDisabled,u=void 0!==m&&m,d=Object(n.useState)(!1),E=Object(r.a)(d,2),v=E[0],p=E[1],f=Object(n.useState)(a),g=Object(r.a)(f,2),N=g[0],b=g[1];return Object(n.useEffect)(function(){var e=function(e){(e.target.getAttribute("class")||"").indexOf("DropdownList-Element")<0&&p(!1)};return document.addEventListener("click",e),function(){document.removeEventListener("click",e)}},[]),c.a.createElement("div",{className:"DropdownList DropdownList-Element ".concat(v?"DropdownList--Open":""," ").concat(u?"DropdownList--disabled":"")},c.a.createElement("div",{className:"DropdownHeader DropdownList-Element ".concat(v?"DropdownHeader--Open":""),onClick:function(){if(1===o.length)return null;p(!v&&!u)}},N),v&&c.a.createElement("div",{className:"DropdownPanel DropdownList-Element"},o.map(function(e,t){return c.a.createElement("div",{className:"DropdownList__Item DropdownList-Element",key:e.key||t,onClick:function(){return function(e){p(!1),b("string"===typeof e?e:e.value),s(e)}(e)}},e.value||e)})))}),j=(a(94),function(e){var t=e.defaultValue,a=void 0===t?"0":t,i=e.confirmCallback,o=void 0===i?function(){}:i,l=Object(n.useState)(a),s=Object(r.a)(l,2),m=s[0],u=s[1],d=Object(n.useState)("0"),E=Object(r.a)(d,2),v=E[0],p=E[1],f=Object(n.useState)(""),g=Object(r.a)(f,2),N=g[0],b=g[1],O=Object(n.useState)(!1),C=Object(r.a)(O,2),h=C[0],y=C[1],S=function(e){e.stopPropagation(),h||(A(),b(e.target.innerText),y(!0))},j=function(e){e.stopPropagation();var t=e.target.innerText;h?(p(m),u(""+t),y(!1)):u("0"===m?""+t:m+""+t)},I=function(e){return Math.floor(e)===e?e+"":Math.floor(10*e)===10*e?e.toFixed(1):e.toFixed(2)},A=function(){var e=m;switch(N){case"+":e=parseFloat(v)+parseFloat(m),u(I(e));break;case"-":e=parseFloat(v)-parseFloat(m),u(I(e));break;case"\xd7":e=parseFloat(v)*parseFloat(m),u(I(e));break;case"\xf7":e=parseFloat(v)/parseFloat(m),u(I(e))}return p("0"),e};return c.a.createElement("div",{className:"Calculator"},c.a.createElement("div",{className:"NumberContainer"},m),c.a.createElement("div",{className:"OperatorContainer"},c.a.createElement("div",{className:"OperatorRow BasicOperators"},c.a.createElement("div",{className:"OperatorItem Operand",onClick:S},"+"),c.a.createElement("div",{className:"OperatorItem Operand",onClick:S},"-"),c.a.createElement("div",{className:"OperatorItem Operand",onClick:S},"\xd7"),c.a.createElement("div",{className:"OperatorItem Operand",onClick:S},"\xf7")),c.a.createElement("div",{className:"OperatorRow NumberPad-1"},c.a.createElement("div",{className:"OperatorItem",onClick:j},"1"),c.a.createElement("div",{className:"OperatorItem",onClick:j},"2"),c.a.createElement("div",{className:"OperatorItem",onClick:j},"3"),c.a.createElement("div",{className:"OperatorItem Backspace",onClick:function(e){e.stopPropagation(),u(m.slice(0,-1))}})),c.a.createElement("div",{className:"OperatorRow NumberPad-4"},c.a.createElement("div",{className:"OperatorItem",onClick:j},"4"),c.a.createElement("div",{className:"OperatorItem",onClick:j},"5"),c.a.createElement("div",{className:"OperatorItem",onClick:j},"6"),c.a.createElement("div",{className:"OperatorItem Operand Clear",onClick:function(e){e.stopPropagation(),u("0"),p("0"),b("")}},"C")),c.a.createElement("div",{className:"OperatorRow NumberPad-7"},c.a.createElement("div",{className:"OperatorItem",onClick:j},"7"),c.a.createElement("div",{className:"OperatorItem",onClick:j},"8"),c.a.createElement("div",{className:"OperatorItem",onClick:j},"9"),c.a.createElement("div",{className:"OperatorItem Operand",onClick:function(e){e.stopPropagation(),A(),b(""),p("0"),y(!1)}},"=")),c.a.createElement("div",{className:"OperatorRow NumberPad-0"},c.a.createElement("div",{className:"OperatorItem OperatorItem--TwoSpan",onClick:j},"0"),c.a.createElement("div",{className:"OperatorItem",onClick:function(e){e.stopPropagation(),h?(p(m),u("0."),y(!1)):u(m+".")}},"."),c.a.createElement("div",{className:"OperatorItem ConfirmBtn",onClick:function(e){e.stopPropagation();var t=A();o(t)}},"\u786e\u8ba4"))))}),I=a(21),A=a(22),T=a(24),D=a(23),_=a(25),k=(a(95),function(e){function t(e){var a;return Object(I.a)(this,t),(a=Object(T.a)(this,Object(D.a)(t).call(this,e))).toggleSelection=function(){var e=a.state.isSelected;a.setState({isSelected:!e}),a.props.toggleSelection&&a.props.toggleSelection(a.props.tag,!e)},a.state={isSelected:e.isSelected},a}return Object(_.a)(t,e),Object(A.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({isSelected:e.isSelected})}},{key:"render",value:function(){var e=this.props.tag,t=void 0===e?"":e,a=this.state.isSelected;return c.a.createElement("div",{className:"HashTagItem ".concat(a?"HashTagItem--Selected":""),onClick:this.toggleSelection},c.a.createElement("div",{className:"HashTag__Content"},t),c.a.createElement("div",{className:"HashTag__Flag"}))}}]),t}(c.a.Component)),F=(a(96),function(e){var t=e.tags,a=void 0===t?[]:t,n=e.selectedTags,i=void 0===n?[]:n,o=e.toggleTagSelection;return a&&0!==a.length?c.a.createElement("div",{className:"HashTagManagement"},a.map(function(e,t){return c.a.createElement("div",{className:"HashTag__Item",key:t},c.a.createElement(k,{tag:e,isSelected:i.indexOf(e)>-1,toggleSelection:o}))})):null}),L=(a(97),function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,c=new Array(n),i=0;i<n;i++)c[i]=arguments[i];return(a=Object(T.a)(this,(e=Object(D.a)(t)).call.apply(e,[this].concat(c)))).onClick=function(){a.props.onClick&&a.props.onClick()},a}return Object(_.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e="ModalMask__container";return this.props.extraCls&&(e+=" "+this.props.extraCls),c.a.createElement("div",{className:e,onClick:this.onClick},c.a.createElement("div",{className:"ModalMask__content"},this.props.children))}}]),t}(c.a.Component));L.defaultProps={extraCls:""};var P=L,w=(a(98),function(e){var t=e.disabled,a=e.onChange,i=e.className,o=void 0===i?"":i,l=e.defaultChecked,s=void 0!==l&&l,m=Object(n.useState)(s),u=Object(r.a)(m,2),d=u[0],E=u[1];return Object(n.useEffect)(function(){E(s)},[s]),c.a.createElement("input",{type:"checkbox",disabled:t,onChange:a,checked:d,className:o})}),M=(a(99),function(e){var t=e.closeCallback,a=e.successCallback,i=e.optionList,o=void 0===i?[]:i,l=e.commentKeyWord,s=void 0===l?"":l,m=Object(n.useMemo)(function(){var e=[],t=[];return o.map(function(a){var n=a.place,c=a.category,i=a.subcategory,o=a.comment;if(s===o){e.indexOf(n)<0&&e.push(n);var r="".concat(c).concat(" - ").concat(i);t.indexOf(r)<0&&t.push(r)}}),[e,t]},[o,s]),u=Object(r.a)(m,2),d=u[0],E=u[1],v=Object(n.useState)(d[0]),p=Object(r.a)(v,2),f=p[0],g=p[1],N=Object(n.useState)(E[0]),b=Object(r.a)(N,2),O=b[0],C=b[1],h=Object(n.useState)(!0),y=Object(r.a)(h,2),j=y[0],I=y[1],A=Object(n.useState)(!0),T=Object(r.a)(A,2),D=T[0],_=T[1];return c.a.createElement(P,null,c.a.createElement("div",{className:"CommentHintDialog"},c.a.createElement("div",{className:"CommentHintDialog__Content"},c.a.createElement("div",{className:"CommentHintDialog-Close",onClick:t}),c.a.createElement("div",{className:"CommentHint__Title"},c.a.createElement("div",{className:"Title"},"Choose Details")),c.a.createElement("div",{className:"CommentHint__Content"},c.a.createElement("div",{className:"CommentHint__Dropdown Place-DropdownList"},c.a.createElement(S,{defaultSelectedValue:d[0],items:d,customizeItemClickHandler:function(e){g(e)}}),c.a.createElement(w,{onChange:function(e){I(e.target.checked)},defaultChecked:j})),c.a.createElement("div",{className:"CommentHint__Dropdown Category-DropdownList"},c.a.createElement(S,{defaultSelectedValue:E[0],items:E,customizeItemClickHandler:function(e){C(e)}}),c.a.createElement(w,{onChange:function(e){_(e.target.checked)},defaultChecked:D}))),c.a.createElement("div",{className:"CommentHint__Footer"},c.a.createElement("div",{className:"MyWacai-Button ConfirmBtn",onClick:function(){var e=O.split(" - "),t=Object(r.a)(e,2),n=t[0],c=t[1],i={};j&&(i=Object.assign({},{place:f})),D&&(i=Object.assign(i,{category:n,subcategory:c})),a(i)}},"\u786e\u5b9a"),c.a.createElement("div",{className:"MyWacai-Button CancelBtn",onClick:t},"\u53d6\u6d88")))))});M.defaultProps={closeCallback:function(){},successCallback:function(){},optionList:[]};var x=M,H=c.a.createContext(null),R=function(e){var t=e.children,a=Object(n.useState)(!0),i=Object(r.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(null),u=Object(r.a)(s,2),d=u[0],E=u[1],v=Object(n.useState)(),p=Object(r.a)(v,2),f=p[0],g=p[1],N=Object(n.useState)(),b=Object(r.a)(N,2),O=b[0],C=b[1];return Object(n.useEffect)(function(){m.a.get("/api/wacai/getAllCommentWithOptions").then(function(e){var t=e.data,a=t.data.comments||[],n=[];a.forEach(function(e){n.push(e.comment)}),E(a),g(n),C(t.data.options||[]),l(!1)})},[]),o?null:c.a.createElement(H.Provider,{value:{commentOptions:d,placeOptions:f,commentFullInfoOptions:O}},t)},B=c.a.createContext(null),V=function(e){var t=e.children,a=Object(n.useState)(!0),i=Object(r.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(null),u=Object(r.a)(s,2),d=u[0],E=u[1];return Object(n.useEffect)(function(){m.a.get("/api/wacai/getAllTags").then(function(e){var t=e.data.data||[];E(t),l(!1)})},[]),o?null:c.a.createElement(B.Provider,{value:d},t)},G=[{category:"\u4ea4\u901a",subcategory:"\u6253\u8f66"},{category:"\u751f\u6d3b",subcategory:"\u6c34\u7535\u7164\u6c14"},{category:"\u9a90\u9a90",subcategory:"\u73a9\u5177"},{category:"\u751f\u6d3b",subcategory:"\u751f\u6d3b\u7528\u54c1"},{category:"\u5468\u672b",subcategory:"\u665a\u9910"},{category:"\u5468\u672b",subcategory:"\u5348\u9910"}],Y=function(e){return e<10?"0".concat(e):"".concat(e)},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=[];return n.push(e),n.push(Y(t)),n.push(Y(a)),n.join("-")},W=function(e){var t=[];return t.push(e.getFullYear()),t.push(Y(e.getMonth()+1)),t.push(Y(e.getDate())),t.join("-")},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=e.getFullYear(),a=e.getMonth(),n=e.getDate(),c=e.getHours(),i=e.getMinutes(),o=e.getSeconds();return"".concat(t,"-").concat(Y(a+1),"-").concat(Y(n)," ").concat(Y(c),":").concat(Y(i),":").concat(Y(o))},z=function(){for(var e=[],t=0;t<36;t++)e[t]="0123456789ABCDEF".substr(Math.floor(16*Math.random()),1);e[14]="4",e[19]="0123456789ABCDEF".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-";var a=e.join("");return a},J=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return(e.filter(function(e){return e.comment.toLowerCase().indexOf(t.toLowerCase())>-1})||[]).map(function(e){return e.date+"dateComment"+e.comment}).sort().reverse().map(function(e){return e.slice(e.indexOf("dateComment")+11)}).slice(0,a)},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;return(e.filter(function(e){return e.toLowerCase().indexOf(t.toLowerCase())>-1})||[]).slice(0,a)},q=(a(100),[{key:0,value:"\u975e\u5468\u671f\u5165\u8d26"},{key:1,value:"\u6bcf\u5929\u5165\u8d26"},{key:2,value:"\u6bcf\u5468\u5165\u8d26"},{key:3,value:"\u6bcf\u6708\u5165\u8d26"},{key:4,value:"\u6bcf\u5e74\u5165\u8d26"}]),$=function(e){var t=e.item,a=void 0===t?{amount:0,city:"\u4e0a\u6d77"}:t,i=e.updatedCatGroup,o=void 0===i?{}:i,l=e.dispatch,s=Object(n.useState)(Object(f.a)({},a,o)),u=Object(r.a)(s,2),d=u[0],E=u[1],v=Object(n.useState)(a.tags?a.tags.split(","):[]),N=Object(r.a)(v,2),b=N[0],h=N[1],I=Object(n.useState)(!1),A=Object(r.a)(I,2),T=A[0],D=A[1],_=Object(n.useState)(!1),k=Object(r.a)(_,2),L=k[0],P=k[1],w=Object(n.useState)(!1),M=Object(r.a)(w,2),R=M[0],V=M[1],Y=Object(n.useState)(!1),U=Object(r.a)(Y,2),W=U[0],K=U[1],$=!!a.id,Q=Object(n.useRef)(null),Z=Object(n.useRef)(null),ee=function(){var e=c.a.useContext(H);return e||console.log("comments are not fetched!"),e||{}}(),te=ee.commentOptions,ae=ee.placeOptions,ne=ee.commentFullInfoOptions,ce=function(){var e=c.a.useContext(B);return e||console.log("tags are not fetched!"),e||{}}(),ie=Object(n.useState)(ce),oe=Object(r.a)(ie,2),re=oe[0],le=oe[1],se=Object(n.useState)(ce),me=Object(r.a)(se,2),ue=me[0],de=me[1],Ee=function(e,t){E(Object.assign({},d,{category:e,subcategory:t}))},ve=function(e){var t=e.repeatRecord,a=void 0!==t&&t,n=function(e){var t=e.category,a=e.subcategory,n=(e.comment,e.amount);return t&&a?n?null:{errorMsg:"\u8bf7\u8f93\u5165\u6709\u6548\u91d1\u989d\uff01"}:{errorMsg:"\u8bf7\u9009\u62e9\u7c7b\u522b\uff01"}}(d);if(n)l({type:"SET_MESSAGE",notificationType:"error",message:n.errorMsg});else{var c="",i={};if(d.id){if(d.isScheduled>0)return void P(!0);c="/api/wacai/updateFinItem",i=Object(f.a)({},d,{tags:b.join(",")})}else d.isScheduled>0?(c="/api/wacai/createScheduledFinItem",i=Object(f.a)({},d,{tags:b.join(",")})):(c="/api/wacai/createFinItem",i=Object(f.a)({},d,{tags:b.join(","),id:z()}));l({type:"APP_LOADING"}),m.a.post(c,{data:i}).then(function(){l({type:"APP_LOADED"}),l({type:"SET_MESSAGE",notificationType:"info",message:"\u4fdd\u5b58\u6210\u529f"}),a?(E(Object.assign({},d,{amount:0})),Q.current.value="0.00"):l({type:"RESET_SELECTED_ITEM"})})}},pe=function(){D(!1),P(!1)},fe=[{name:"\u53ea\u5220\u9664\u8fd9\u4e00\u7b14",clickHandler:function(){l({type:"APP_LOADING"}),m.a.delete("/api/wacai/deleteFinItem?id=".concat(d.id)).then(function(){l({type:"APP_LOADED"}),D(!1),l({type:"RESET_SELECTED_ITEM"})},function(e){var t=e.response;l({type:"APP_LOADED"}),D(!1),401===t.status&&l({type:"TOKEN_INVALID"})})}},{name:"\u5220\u9664\u8fd9\u4e00\u7b14\u4ee5\u53ca\u4ee5\u540e\u6240\u6709",clickHandler:function(){l({type:"APP_LOADING"});var e=new Date;m.a.delete("/api/wacai/deleteScheduledFinItem?scheduleId=".concat(d.scheduleId,"&year=").concat(e.getFullYear(),"&month=").concat(e.getMonth(),"&day=").concat(e.getDate())).then(function(){l({type:"APP_LOADED"}),D(!1),l({type:"RESET_SELECTED_ITEM"})},function(e){var t=e.response;l({type:"APP_LOADED"}),D(!1),401===t.status&&l({type:"TOKEN_INVALID"})})}}],ge=[{name:"\u53ea\u66f4\u65b0\u8fd9\u4e00\u7b14",clickHandler:function(){P(!1);var e=Object(f.a)({},d);l({type:"APP_LOADING"}),m.a.post("/api/wacai/updateFinItem",{data:e}).then(function(){l({type:"APP_LOADED"}),l({type:"RESET_SELECTED_ITEM"})})}},{name:"\u66f4\u65b0\u8fd9\u4e00\u7b14\u4ee5\u53ca\u4ee5\u540e\u6240\u6709",clickHandler:function(){var e=Object(f.a)({},d),t={},a=new Date;t.scheduledId=e.scheduledId,t.year=a.getFullYear(),t.month=a.getMonth(),t.day=a.getDate(),l({type:"APP_LOADING"}),m.a.post("/api/wacai/updateScheduledFinItem",{data:e,options:t}).then(function(){l({type:"APP_LOADED"}),P(!1),l({type:"RESET_SELECTED_ITEM"})})}}];return c.a.createElement("div",{className:"FinItemDetails"},c.a.createElement("div",{className:"Fin-Nav"},c.a.createElement("div",{className:"Fin-Nav-Out"},"\u652f\u51fa"),c.a.createElement("div",{className:"Fin-Nav-Arrow"})),c.a.createElement("div",{className:"Fin-Date Fin-WhiteBack"},c.a.createElement(y.a,{value:new Date(d.date.replace(/-/g,"/")),defaultValue:new Date,onChange:function(e){var t=e.format("YYYY-MM-DD hh:mm:ss");E(Object.assign({},d,{date:t}))},inputProps:{disabled:$&&d.isScheduled>0}})),c.a.createElement("div",{className:"Fin-Schedule Fin-WhiteBack"},c.a.createElement(S,{isDisabled:$,defaultSelectedValue:q[d.isScheduled||0].value,items:q,customizeItemClickHandler:function(e){var t=e.key;E(Object.assign({},d,{isScheduled:t}))}})),c.a.createElement("div",{className:"Fin-Header Fin-WhiteBack"},c.a.createElement("div",{className:"Fin-SubCat",onClick:function(){l({type:"CHANGE_TO_CATEGORY_SELECTION",currentItem:d,selectedCatGroup:{category:d.category,subcategory:d.subcategory}})}},c.a.createElement("div",{className:"Category"},d.category),c.a.createElement("div",{className:"SubCategory"},d.subcategory)),c.a.createElement("div",{className:"Fin-Amount"},c.a.createElement("input",{type:"number",ref:Q,onFocus:function(e){d.amount?e.target.value=d.amount:e.target.value=""},onBlur:function(e){e.target.value=parseFloat(d.amount).toFixed(2)},onChange:function(e){var t=parseFloat(e.target.value);Number.isNaN(t)&&(t=0),E(Object.assign({},d,{amount:t}))},defaultValue:parseFloat(d.amount).toFixed(2)||"0.00"}),c.a.createElement("div",{className:"CalculatorIcon",onClick:function(){V(!R)}},R&&c.a.createElement("div",{className:"CalculatorPanel"},c.a.createElement(j,{defaultValue:d.amount+"",confirmCallback:function(e){var t=+parseFloat(e).toFixed(2);E(Object.assign({},d,{amount:t})),V(!1),Q.current.value=parseFloat(e).toFixed(2)}}))))),c.a.createElement("div",{className:"Fin-ComCats Fin-WhiteBack"},c.a.createElement("div",{className:"Fin-ComCat-Container"},G.map(function(e,t){return c.a.createElement("div",{className:"Fin-ComCat",key:t},c.a.createElement(g,{category:e.category,subcategory:e.subcategory,onClickHandler:Ee}))}))),c.a.createElement("div",{className:"Fin-Comment Fin-WhiteBack"},c.a.createElement(O,{optionList:te,filterFunction:J,placeholder:"\u5907\u6ce8",onChangeCallback:function(e,t){ne.filter(function(t){return t.comment===e}).length>0&&t&&K(!0),E(Object.assign({},d,{comment:e}))},defaultValue:d.comment})),c.a.createElement("div",{className:"Fin-FullDetails Fin-WhiteBack"},c.a.createElement("div",{className:"Fin-Place"},c.a.createElement(O,{optionList:ae,filterFunction:X,placeholder:"\u5546\u573a",onChangeCallback:function(e){E(Object.assign({},d,{place:e}))},defaultValue:d.place})),c.a.createElement("div",{className:"Fin-City"},c.a.createElement("input",{type:"input",placeholder:"\u57ce\u5e02",onChange:function(e){var t=e.target.value||"";E(Object.assign({},d,{city:t}))},defaultValue:d.city||"\u4e0a\u6d77"}))),c.a.createElement("div",{className:"Fin-Toolbar Fin-WhiteBack"},c.a.createElement("div",{className:"Fin-Btns"},c.a.createElement("div",{className:"Fin-Btn Fin-BackBtn",onClick:function(){l({type:"RESET_SELECTED_ITEM"})}},"\u8fd4\u56de"),d.id?c.a.createElement("div",{className:"Fin-Btn Fin-DeleteBtn",onClick:function(){d.isScheduled>0?D(!0):(l({type:"APP_LOADING"}),m.a.delete("/api/wacai/deleteFinItem?id=".concat(d.id)).then(function(){l({type:"APP_LOADED"}),l({type:"RESET_SELECTED_ITEM"})},function(e){var t=e.response;l({type:"APP_LOADED"}),401===t.status&&l({type:"TOKEN_INVALID"})}))}},"\u5220\u9664"):c.a.createElement("div",{className:"Fin-Btn Fin-RepeatBtn",onClick:function(){ve({repeatRecord:!0})}},"\u4fdd\u5b58\u518d\u8bb0"),c.a.createElement("div",{className:"Fin-Btn Fin-SaveBtn",onClick:ve},"\u4fdd\u5b58"))),c.a.createElement("div",{className:"Fin-Tags Fin-WhiteBack"},c.a.createElement("div",{className:"Fin-Tags-Add"},c.a.createElement("input",{type:"input",ref:Z,placeholder:"\u65b0\u52a0\u6807\u7b7e",onChange:function(e){var t=e.target.value;de(re.filter(function(e){return e.indexOf(t)>-1}))},defaultValue:""}),c.a.createElement("div",{className:"Fin-Tags-Add-Btn",onClick:function(){var e=Z.current.value;re.indexOf(e)<0?(le([e].concat(Object(p.a)(re))),de([e].concat(Object(p.a)(re)))):de(Object(p.a)(re)),b.indexOf(e)<0&&h([].concat(Object(p.a)(b),[e])),Z.current.value=""}})),c.a.createElement("div",{className:"Fin-TagsManagement"},c.a.createElement(F,{tags:ue,selectedTags:b,toggleTagSelection:function(e,t){var a=b.indexOf(e),n=b.slice();a>-1?(n.splice(a,1),h(n)):h([].concat(Object(p.a)(b),[e]))}}))),T&&c.a.createElement("div",{className:"PopupButtons--Container"},c.a.createElement(C,{buttons:fe,cancelHandler:pe})),L&&c.a.createElement("div",{className:"PopupButtons--Container"},c.a.createElement(C,{buttons:ge,cancelHandler:pe})),W&&c.a.createElement("div",{className:"FinDetails__CommentHintDialog"},c.a.createElement(x,{closeCallback:function(){K(!W)},successCallback:function(e){var t=e.place,a=e.category,n=e.subcategory,c={};t&&(c.place=t),a&&n&&(c.category=a,c.subcategory=n),E(Object.assign({},d,c)),K(!1)},optionList:ne,commentKeyWord:d.comment})))},Q=Object(l.b)(function(e){return{updatedCatGroup:(e.fin||{}).updatedCatGroup||{}}})(function(e){return c.a.createElement(R,null,c.a.createElement(V,null,c.a.createElement($,e)))}),Z=(a(101),Object(l.b)()(function(e){var t=e.closeHandler,a=e.hasSearch,n=void 0===a||a,i=e.barTitle,o=void 0===i?"":i,r=e.searchHandler,l=e.children,s=e.dispatch;return c.a.createElement("div",{className:"HeaderToolbar"},c.a.createElement("div",{className:"HeaderToolbar-Container"},c.a.createElement("div",{className:"CloseBtn",onClick:function(){t?t():s({type:"CHANGE_TO_MAIN"})}}),o&&c.a.createElement("div",{className:"BarInfo"},o),!o&&l&&"function"===typeof l&&c.a.createElement("div",{className:"BarContent"},l()),!o&&!l&&c.a.createElement("div",{className:"BarHeader"}),n&&c.a.createElement("div",{className:"ToolBtns"},c.a.createElement("div",{className:"SearchBtn",onClick:function(){r?r():s({type:"OPEN_SEARCH_FIN_MODE"})}}))))})),ee=(a(102),Object(l.b)(function(e){return{selectedCatGroup:e.fin.selectedCatGroup||{}}})(function(e){var t=e.selectedCatGroup,a=void 0===t?{}:t,i=e.dispatch,o=Object(n.useState)(a.category||""),l=Object(r.a)(o,2),s=l[0],u=l[1],d=Object(n.useState)({}),E=Object(r.a)(d,2),v=E[0],p=E[1];Object(n.useEffect)(function(){m.a.get("/api/wacai/getCategoryGroup").then(function(e){var t=e.data.data||{};p(t)},function(e){401===e.response.status&&i({type:"TOKEN_INVALID"})})},[]);return c.a.createElement("div",{className:"FinCatSubCat"},c.a.createElement(Z,{barTitle:"\u652f\u51fa\u7c7b\u522b",hasSearch:!1}),c.a.createElement("div",{className:"FinCatSubCat-Container"},c.a.createElement("div",{className:"Cats"},Object.keys(v).map(function(e,t){return c.a.createElement("div",{className:"CatItem",key:t,onClick:function(){return function(e){u(e)}(e)}},c.a.createElement("div",{className:"CatItem-Border ".concat(s===e?"CatItem-Border-Selected":"")},e))})),c.a.createElement("div",{className:"SubCats"},s&&v[s]&&v[s].map(function(e,t){var a=e.subcategory;return e.isCommon,c.a.createElement("div",{className:"SubCatItem",onClick:function(){i({type:"CATEGORY_SELECTION_DONE",updatedCatGroup:{category:s,subcategory:a}})},key:t},c.a.createElement("div",{className:"".concat(t!==v[s].length-1?"SubCat-Border":"")},c.a.createElement("div",{className:"SubCat-Text"},a)))}))))})),te=(a(103),function(e){var t=e.date,a=void 0===t?"2019-04-22":t,n=e.amount,i=void 0===n?1203:n,o=e.items,r=void 0===o?[]:o,l=a.substring(a.length-2);return c.a.createElement("div",{className:"DayExpense"},c.a.createElement("div",{className:"DayExpense-Container"},c.a.createElement("div",{className:"DayInfo"},l),c.a.createElement("div",{className:"DayExpenseInfo"},c.a.createElement("div",{className:"DayHeader"},c.a.createElement("div",{className:"DayHeader-Weekday"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"2019-04-22";return["\u5468\u65e5","\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94","\u5468\u516d"][new Date(e).getDay()]}(a)),c.a.createElement("div",{className:"DayExpenseAmount"},"\u652f\uff1a",parseFloat(i).toFixed(2))),c.a.createElement("div",{className:"DayExpenseList"},r.map(function(e,t){return c.a.createElement("div",{key:e.id},c.a.createElement(E,{dayMode:!0,isLast:t===r.length-1,item:e}))})))))}),ae=(a(41),Object(l.b)()(function(e){var t=e.month,a=void 0===t?"04":t,i=e.year,o=void 0===i?"2019":i,l=e.amount,s=void 0===l?11086:l,u=e.barWidthRatio,E=void 0===u?1:u,v=e.dayItems,p=void 0===v?[]:v,f=e.dispatch,g=Object(n.useState)(!1),N=Object(r.a)(g,2),b=N[0],O=N[1],C=Object(n.useState)(p),h=Object(r.a)(C,2),y=h[0],S=h[1],j=Object(n.useState)(!1),I=Object(r.a)(j,2),A=I[0],T=I[1],D=1*E*100+"%";return c.a.createElement("div",{className:"MonthExpense"},c.a.createElement("div",{className:"MonthExpense-Container ".concat(b?"":"MonthExpenseBorder"),onClick:function(){b?O(!b):(O(!b),y.length<=0&&(T(!0),m.a.get("/api/wacai/getFinItemsByMonth?month=".concat(a,"&year=").concat(o)).then(function(e){var t=e.data.data||[];S(t),setTimeout(function(){T(!1)},0)},function(e){401===e.response.status&&f({type:"TOKEN_INVALID"})})))}},c.a.createElement("div",{className:"MonthTitle"},c.a.createElement("div",{className:"Month"},a),c.a.createElement("div",{className:"Year"},o)),c.a.createElement("div",{className:"MonthExpense"},c.a.createElement("div",{className:"ExpenseTitle"},"\u652f\u51fa\uff1a",parseFloat(s).toFixed(2)),c.a.createElement("div",{className:"ExpenseAmount"},c.a.createElement("div",{className:"AmountBar",style:{width:D}}))),c.a.createElement("div",{className:"MonthExpense-Dropdown ".concat(b?"MonthExpense-Expanded":"")})),b&&(A?c.a.createElement(d,null):y.map(function(e,t){return c.a.createElement("div",{key:t},c.a.createElement(te,{date:e.date,amount:e.amount,items:e.items}))})))})),ne=(a(104),Object(l.b)(null,function(e){return{goToMainPage:function(){e({type:"CHANGE_TO_MAIN"})}}})(function(e){e.isExpanded;var t=e.goToMainPage,a=void 0===t?function(){}:t,i=e.scrollIntoViewRef,o=Object(n.useState)(!1),l=Object(r.a)(o,2),s=l[0],m=l[1];return c.a.createElement("div",{className:"BottomButtonGroup"},c.a.createElement("div",{className:"ControlButton ".concat(s?"buttonExpanded":""),onClick:function(){m(!s)}}),s&&c.a.createElement("div",{className:"Bottom_ButtonGroup"},c.a.createElement("div",{className:"BottomButton BackToTop",onClick:function(){i.current.scrollIntoView({behavior:"smooth",block:"start"}),m(!1)}}),c.a.createElement("div",{className:"BottomButton BackToMain",onClick:function(){a(),m(!1)}})))})),ce=Object(l.b)()(function(e){var t=e.dispatch,a=Object(n.useState)({}),i=Object(r.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(!1),u=Object(r.a)(s,2),d=u[0],E=u[1],v=Object(n.useRef)(null);return Object(n.useEffect)(function(){var e=new Date;m.a.get("/api/wacai/getHistoryExpense?year=".concat(e.getFullYear(),"&month=").concat(e.getMonth()+1)).then(function(e){var t=e.data.data||{};E(!1),l(t)},function(e){401===e.response.status&&t({type:"TOKEN_INVALID"})})},[]),Object(n.useEffect)(function(){},[v]),c.a.createElement("div",{className:"FinItemList",ref:v},c.a.createElement(Z,null),o.items&&o.items.map(function(e,t){return c.a.createElement("div",{key:t},c.a.createElement(ae,{month:e.month,year:e.year,amount:e.amount,barWidthRatio:e.amount/o.highestMonthAmount}))}),o.items&&c.a.createElement(ne,{isExpanded:d,scrollIntoViewRef:v}))}),ie=(a(105),Object(l.b)()(function(e){var t=e.dispatch;return c.a.createElement("div",{className:"TemplateToolbar"},c.a.createElement("div",{className:"ToolbarContainer"},c.a.createElement("div",{className:"ToolbarInfo"},"\u8bb0\u8d26\u6a21\u677f"),c.a.createElement("div",{className:"ToolbarBtns"},c.a.createElement("div",{className:"CreateBtn",onClick:function(){t({type:"CREATE_TEMPLATE"})}},"\u6dfb\u52a0\u6a21\u677f"))))})),oe=(a(106),Object(l.b)()(function(e){var t=e.item,a=void 0===t?{}:t,n=e.isLast,i=void 0!==n&&n,o=e.dispatch,r=a.comment,l=a.category,s=a.subcategory,m=a.place;return c.a.createElement("div",{className:"FinTemplateItem"},c.a.createElement("div",{className:"ItemContainer ".concat(i?"":"ItemBorder"),onClick:function(){o({type:"SELECT_ITEM",item:{comment:r,category:l,subcategory:s,place:m,amount:0}})}},c.a.createElement("div",{className:"Categories"},c.a.createElement("div",{className:"Category"},l),c.a.createElement("div",{className:"SubCategory"},s)),c.a.createElement("div",{className:"Comment"},r)))})),re=(a(107),Object(l.b)(function(e){var t=e.fin||{};return{updatedCatGroup:t.updatedCatGroup||{},isCreatingTemplate:t.isCreatingTemplate}})(function(e){var t=e.updatedCatGroup,a=e.dispatch,i=Object(n.useState)(t),o=Object(r.a)(i,2),l=o[0],s=o[1];Object(n.useEffect)(function(){a({type:"RESET_UPDATED_CAT_GROUP"})},[]);return c.a.createElement("div",{className:"CreateTemplate"},c.a.createElement("div",{className:"CreatePanel"},c.a.createElement("div",{className:"Fin-SubCat",onClick:function(){a({type:"CHANGE_TO_CATEGORY_SELECTION",selectedCatGroup:{category:l.category,subcategory:l.subcategory}})}},l.category," - ",l.subcategory),c.a.createElement("div",{className:"Fin-Comment"},c.a.createElement("input",{className:"CommentInput",placeholder:"\u5907\u6ce8",type:"input",onChange:function(e){s(Object.assign({},l,{comment:e.target.value}))},value:l.comment})),c.a.createElement("div",{className:"Fin-Place"},c.a.createElement("input",{className:"PlaceInput",placeholder:"\u5546\u573a",type:"input",onChange:function(e){s(Object.assign({},l,{place:e.target.value}))},value:l.place})),c.a.createElement("div",{className:"Fin-Toolbar"},c.a.createElement("div",{className:"Fin-Btns"},c.a.createElement("div",{className:"Fin-Btn Fin-BackBtn",onClick:function(){a({type:"CHANGE_TO_FIN_TEMPLATE_LIST"})}},"\u8fd4\u56de"),c.a.createElement("div",{className:"Fin-Btn Fin-SaveBtn",onClick:function(){l.category&&l.subcategory&&l.comment&&m.a.post("/api/wacai/createFinTemplate",{data:l}).then(function(){a({type:"CHANGE_TO_FIN_TEMPLATE_LIST"})},function(e){401===e.response.status&&a({type:"TOKEN_INVALID"})})}},"\u4fdd\u5b58")))))})),le=(a(108),Object(l.b)(function(e){return{isCreatingTemplate:(e.fin||{}).isCreatingTemplate}})(function(e){var t=e.isCreatingTemplate,a=e.dispatch,i=Object(n.useState)([]),o=Object(r.a)(i,2),l=o[0],s=o[1];return Object(n.useEffect)(function(){m.a.get("/api/wacai/getFinTemplates").then(function(e){var t=e.data.data||[];s(t)},function(e){401===e.response.status&&a({type:"TOKEN_INVALID"})})},[t]),c.a.createElement("div",{className:"FinTemplateList"},c.a.createElement(Z,{barTitle:t?"\u521b\u5efa\u6a21\u677f":"",hasSearch:!1}),c.a.createElement(ie,null),t?c.a.createElement(re,null):c.a.createElement("div",{className:"Templates"},l.map(function(e,t){return c.a.createElement("div",{key:t,className:"Template"},c.a.createElement(oe,{item:e,isLast:t===l.length-1}))})))})),se=function(e){var t=e.total,a=e.start,i=void 0===a?0:a,o=e.duration,l=void 0===o?200:o,s=Object(n.useState)(i||function(e){return e<1e3?0:e<5e3?1e3:e<1e4?5e3:e<15e3?1e4:e<2e4?15e3:2e4}(t)),m=Object(r.a)(s,2),u=m[0],d=m[1],E=(t-u)/l,v=u;return Object(n.useEffect)(function(){var e=setInterval(function(){(v+=E)>=t&&(v=t,clearInterval(e)),d(v)},1)},[t]),c.a.createElement("div",{className:"AutoUpdateNumber"},parseFloat(u).toFixed(2))},me=(a(109),Object(l.b)()(function(e){var t=e.type,a=e.message,i=e.errorTimeout,o=void 0===i?1e3:i,l=e.dispatch,s=Object(n.useState)(!0),m=Object(r.a)(s,2),u=m[0],d=m[1];return Object(n.useEffect)(function(){d(!1),setTimeout(function(){d(!0),setTimeout(function(){l({type:"RESET_MESSAGE"})},1e3)},o)},[]),c.a.createElement("div",{className:"Notification ".concat(u?"fadeOutAnimation":"")},c.a.createElement("div",{className:"".concat("error"===t?"Message-Container Error":"Message-Container Info")},c.a.createElement("div",{className:"".concat("error"===t?"ErrorMessage":"InfoMessage")},a)))})),ue=(a(110),Object(l.b)()(function(e){var t=e.customStyles,a=void 0===t?{}:t,i=e.advancedSearchHanlder,o=void 0===i?void 0:i,l=e.dispatch,s=Object(n.useState)(""),u=Object(r.a)(s,2),d=u[0],E=u[1];return c.a.createElement("div",{className:"SearchBox",style:a},c.a.createElement("div",{className:"SearchBox-Container"},c.a.createElement("div",{className:"AdvanceSearch"},c.a.createElement("div",{className:"AdvanceSearch-Text",onClick:function(){o&&o()}},"\u9ad8\u7ea7\u641c\u7d22")),c.a.createElement("div",{className:"SimpleSearch"},c.a.createElement("input",{type:"text",placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u8bcd",onChange:function(e){E(e.target.value)},value:d}))),c.a.createElement("div",{className:"Btns"},c.a.createElement("div",{className:"SearchBtn",onClick:function(){if(d){var e=new Date;m.a.get("/api/wacai/searchFinItems?searchString=".concat(d,"&year=").concat(e.getFullYear(),"&month=").concat(e.getMonth()+1)).then(function(e){var t=e.data.data||[];l({type:"SEARCH_FIN_RESULTS_LOADED",finItems:t})})}}},"\u786e\u5b9a")))})),de=function(e){var t=e.month,a=void 0===t?"04":t,i=e.year,o=void 0===i?"2019":i,l=e.amount,s=void 0===l?11086:l,m=e.barWidthRatio,u=void 0===m?1:m,d=e.dayItems,E=void 0===d?[]:d,v=Object(n.useState)(!1),p=Object(r.a)(v,2),f=p[0],g=p[1],N=1*u*100+"%",b=function(e){var t={};return e.map(function(e){var a=new Date(e.date.replace(/-/g,"/")),n=Y(a.getDate()),c=Y(a.getMonth()+1),i=a.getFullYear();t["".concat(i,"-").concat(c,"-").concat(n)]?(t["".concat(i,"-").concat(c,"-").concat(n)].amount+=e.amount,t["".concat(i,"-").concat(c,"-").concat(n)].items.push(e)):t["".concat(i,"-").concat(c,"-").concat(n)]={amount:e.amount,items:[e]}}),t}(E);return c.a.createElement("div",{className:"MonthExpense"},c.a.createElement("div",{className:"MonthExpense-Container ".concat(f?"":"MonthExpenseBorder"),onClick:function(){g(!f)}},c.a.createElement("div",{className:"MonthTitle"},c.a.createElement("div",{className:"Month"},a),c.a.createElement("div",{className:"Year"},o)),c.a.createElement("div",{className:"MonthExpense"},c.a.createElement("div",{className:"ExpenseTitle"},"\u652f\u51fa\uff1a",parseFloat(s).toFixed(2)),c.a.createElement("div",{className:"ExpenseAmount"},c.a.createElement("div",{className:"AmountBar",style:{width:N}}))),c.a.createElement("div",{className:"MonthExpense-Dropdown ".concat(f?"MonthExpense-Expanded":"")})),f&&Object.keys(b).sort().reverse().map(function(e,t){return c.a.createElement("div",{key:t},c.a.createElement(te,{date:e,amount:b[e].amount,items:b[e].items}))}))},Ee=(a(111),function(e){var t=e.finItems,a=void 0===t?[]:t,n=0;a.length>0&&a.forEach(function(e){n+=e.amount});var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={},a=0;return e.map(function(e,a){var n=new Date(e.date.replace(/-/g,"/")),c=Y(n.getMonth()+1),i=n.getFullYear();t["".concat(i,"-").concat(c)]?(t["".concat(i,"-").concat(c)].amount+=e.amount,t["".concat(i,"-").concat(c)].dayItems.push(e)):t["".concat(i,"-").concat(c)]={amount:e.amount,dayItems:[e]}}),Object.values(t).forEach(function(e){e.amount>a&&(a=e.amount)}),{highestMonthAmount:a,items:t}}(a);return c.a.createElement("div",{className:"SearchFinItemList"},c.a.createElement("div",{className:"SearchResultContainer"},c.a.createElement("div",{className:"SearchResult-Summary"},c.a.createElement("div",{className:"SummaryItem SummaryAmount"},"\uffe5 ",parseFloat(n).toFixed(2)),c.a.createElement("div",{className:"SummaryItem SummaryCaption"},"\u652f\u51fa"))),c.a.createElement("div",{className:"ListContainer"},a.length>0&&Object.keys(i.items).sort().reverse().map(function(e,t){return c.a.createElement("div",{key:t},c.a.createElement(de,{month:e.split("-")[1],year:e.split("-")[0],amount:i.items[e].amount,barWidthRatio:i.items[e].amount/i.highestMonthAmount,dayItems:i.items[e].dayItems}))})))}),ve=(a(112),Object(l.b)(function(e){return{searchParams:(e.search||{}).searchParams||{}}})(function(e){var t,a=e.type,i=e.name,o=e.Comp,l=e.defaultValue,s=e.formatter,m=void 0===s?function(e){return e}:s,u=e.searchParams,d=e.dispatch,E=Object(n.useState)(!1),v=Object(r.a)(E,2),p=v[0],f=v[1];return c.a.createElement(n.Fragment,null,c.a.createElement("div",{className:"AdvanceSearchItem ".concat(p&&o?"AdvanceSearchItem-NoBottomBorder":"")},c.a.createElement("div",{className:"ItemName"},c.a.createElement("span",null,i)),c.a.createElement("div",{className:"ItemOption"},c.a.createElement("div",{className:"ItemOption-Container",onClick:function(){f(!p)}},c.a.createElement("div",{className:"ItemSelectedValue"},u[a]?(t=u[a],m?m(t):t):l),c.a.createElement("div",{className:"ItemSelectionButton"},">")))),p&&o&&c.a.createElement(o,{currentValue:u[a],submitHandler:function(e){!function(e){d({type:"SET_ADVANCE_SEARCH_PARAM",itemType:a,itemValue:e})}(e),f(!1)},cancelHandler:function(){f(!1)}}))})),pe=(a(113),function(e){var t=e.defaultSelection,a=void 0===t?[]:t,i=e.validSeletions,o=void 0===i?[]:i,l=e.handleSelection,s=void 0===l?function(){}:l,m=Object(n.useState)(a),u=Object(r.a)(m,2),d=u[0],E=u[1],v=function(e){var t=e.target,a=t.name,n=t.checked,c=d.slice();if(n)c.push(a),E(c);else{var i=c.indexOf(a);c.splice(i,1),E(c)}s(c)};return Object(n.useEffect)(function(){E(a)},[a]),c.a.createElement("div",{className:"MultiSelection"},o.length>0?c.a.createElement("div",{className:"SelectionList"},o.map(function(e,t){return c.a.createElement("div",{key:t,className:"SelectionItem"},c.a.createElement("input",{type:"checkbox",name:e,onChange:v,checked:d.indexOf(e)>-1}),c.a.createElement("label",null,e))})):null)}),fe=(a(114),function(e){var t=e.enableSubmitButton,a=void 0===t||t,n=e.enableCancelButton,i=void 0===n||n,o=e.submitHandler,r=void 0===o?void 0:o,l=e.cancelHandler,s=void 0===l?void 0:l;return c.a.createElement("div",{className:"Selection__ButtonGroups"},a&&c.a.createElement("div",{className:"SubmitButton",onClick:r},"\u786e\u8ba4"),i&&c.a.createElement("div",{className:"CancelButton",onClick:s},"\u53d6\u6d88"))}),ge=Object(l.b)()(function(e){var t=e.currentValue,a=void 0===t?{}:t,i=e.submitHandler,o=void 0===i?void 0:i,l=e.cancelHandler,s=void 0===l?void 0:l,u=e.dispatch,d=Object(n.useState)(a.category||"\u5168\u90e8"),E=Object(r.a)(d,2),v=E[0],f=E[1],g=Object(n.useState)(a.subcategory||"\u5168\u90e8"),N=Object(r.a)(g,2),b=N[0],O=N[1],C=Object(n.useState)({}),h=Object(r.a)(C,2),y=h[0],j=h[1],I=Object(n.useState)("\u5168\u90e8"===(a.category||"\u5168\u90e8")),A=Object(r.a)(I,2),T=A[0],D=A[1],_=Object(n.useState)([]),k=Object(r.a)(_,2),F=k[0],L=k[1],P=Object(n.useState)([]),w=Object(r.a)(P,2),M=w[0],x=w[1];Object(n.useEffect)(function(){m.a.get("/api/wacai/getCategoryGroup").then(function(e){var t=e.data.data||{};j(t);var a=function(e){var t=Object.keys(e);return(t=t.map(function(e,t){return{key:t+1,value:e}})).unshift({key:0,value:"\u5168\u90e8"}),t}(t);L(a)},function(e){401===e.response.status&&u({type:"TOKEN_INVALID"})})},[]);return c.a.createElement("div",{className:"CategorySelectionPanel"},c.a.createElement("div",{className:"CategorySelectionContainer"},c.a.createElement("div",{className:"CategoryTitle"},"\u7c7b\u522b"),c.a.createElement("div",{className:"CategorySelection"},c.a.createElement(S,{defaultSelectedValue:v,items:F,customizeItemClickHandler:function(e){f(e.value);var t=[{key:0,value:"\u5168\u90e8"}];if("\u5168\u90e8"===e.value)x(t),D(!1);else{var a=y[e.value];a=a.map(function(e,t){return{key:t+1,value:e.subcategory}}),x([].concat(t,Object(p.a)(a))),D(!1)}}}))),c.a.createElement("div",{className:"SubCategorySelectionContainer"},c.a.createElement("div",{className:"SubCategoryTitle"},"\u5b50\u7c7b"),c.a.createElement("div",{className:"SubCategorySelection"},c.a.createElement(S,{defaultSelectedValue:b,isDisabled:T,items:M,customizeItemClickHandler:function(e){O(e.value)}}))),c.a.createElement(fe,{submitHandler:function(){o({category:v,subcategory:b})},cancelHandler:function(){s()}}))}),Ne=Object(l.b)()(function(e){var t=e.currentValue,a=void 0===t?[]:t,i=e.submitHandler,o=void 0===i?function(){}:i,l=e.cancelHandler,s=void 0===l?function(){}:l,m=e.dispatch,u=Object(n.useState)(a),d=Object(r.a)(u,2),E=d[0],v=d[1];return c.a.createElement("div",{className:"AmountRangeSelectionPanel"},c.a.createElement("div",{className:"AmountRangeAdder",onClick:function(){v([].concat(Object(p.a)(E),[{minAmount:0,maxAmount:0}]))}},"+"),c.a.createElement("div",{className:"AmountRangeContainer"},E.map(function(e,t){var a=e.minAmount,n=e.maxAmount;return c.a.createElement("div",{className:"AmountRangeItem",key:t},c.a.createElement("div",{className:"AmountRangeMain"},c.a.createElement("input",{className:"AmountRangeItem--Min",onChange:function(e){return function(e,t){var a=Object(p.a)(E),n=e.target.value;a[t].minAmount=n,v(Object(p.a)(a))}(e,t)},value:a}),c.a.createElement("div",{className:"AmountRangeItem--Sep"}," - "),c.a.createElement("input",{className:"AmountRangeItem--Max",onChange:function(e){return function(e,t){var a=Object(p.a)(E),n=e.target.value;a[t].maxAmount=n,v(Object(p.a)(a))}(e,t)},value:n})),c.a.createElement("div",{className:"AmountRangeRemover",onClick:function(){!function(e){var t=Object(p.a)(E);t.splice(e,1),v(Object(p.a)(t))}(t)}},"-"))})),c.a.createElement(fe,{submitHandler:function(){for(var e in E)if(E[e].minAmount>E[e].maxAmount&&0!=E[e].maxAmount)return void m({type:"SET_MESSAGE",notificationType:"error",message:"\u91d1\u989d\u533a\u95f4\u8bbe\u7f6e\u6709\u8bef"});o(E)},cancelHandler:function(){s()}}))}),be=[{type:"dateRange",name:"\u65e5\u671f",defaultValue:"\u5168\u90e8",comp:function(e){var t=e.currentValue,a=void 0===t?{}:t,i=e.submitHandler,o=void 0===i?function(){}:i,l=e.cancelHandler,s=void 0===l?function(){}:l,m=Object(n.useState)(a),u=Object(r.a)(m,2),d=u[0],E=u[1],v=Object(n.useState)(9===a.key),p=Object(r.a)(v,2),g=p[0],N=p[1],b=Object(n.useState)(9===a.key?new Date(a.minDate):new Date),O=Object(r.a)(b,2),C=O[0],h=O[1],j=Object(n.useState)(!1),I=Object(r.a)(j,2),A=I[0],T=I[1],D=Object(n.useState)(9===a.key?new Date(a.maxDate):new Date),_=Object(r.a)(D,2),k=_[0],F=_[1],L=Object(n.useState)(!1),P=Object(r.a)(L,2),w=P[0],M=P[1],x=new Date,H=x.getFullYear(),R=x.getMonth()+1,B=x.getDate(),V=x.getDay(),G=function(e,t){switch(t){case 2:return e%4==0&&e%100||e%400==0?29:28;case 9:case 4:case 6:case 11:return 30;default:return 31}},Y=function(e,t,a,n){if(a<n){var c=n-a;return{minDate:U(e,t-1,G(e,t-1)-(c-1)),maxDate:U(e,t,a+(7-n))}}return{minDate:U(e,t,a-(n-1)),maxDate:U(e,t,a+(7-n))}},K=[{key:0,value:"\u5168\u90e8"},{key:1,value:"\u672c\u5e74",minDate:U(H,1,1),maxDate:U(H,12,31)},{key:2,value:"\u53bb\u5e74",minDate:U(H-1,1,1),maxDate:U(H-1,12,31)},{key:3,value:"\u672c\u5b63",minDate:U(H,R-R%3+1,1),maxDate:U(H,R+(3-R%3),31)},Object(f.a)({key:4,value:"\u4e0a\u5b63"},function(e,t){return t<3?{minDate:U(e-1,9,1),maxDate:U(e-1,12,31)}:{minDate:U(e,t-t%3-2,1),maxDate:U(e,t+(3-t%3)-3,31)}}(H,R)),{key:5,value:"\u672c\u6708",minDate:U(H,R,1),maxDate:U(H,R,G(H,R))},Object(f.a)({key:6,value:"\u4e0a\u6708"},function(e,t){return 1===t?{minDate:U(e-1,12,1),maxDate:U(e-1,12,31)}:{minDate:U(e,t-1,1),maxDate:U(e,t-1,G(e,t-1))}}(H,R)),Object(f.a)({key:7,value:"\u672c\u5468"},Y(H,R,B,V)),Object(f.a)({key:8,value:"\u4e0a\u5468"},function(e,t,a,n){return a-7<=0?Object(f.a)({},Y(e,t-1,G(e,t-1)-(7-a),n)):Object(f.a)({},Y(e,t,a-7,n))}(H,R,B,V)),{key:9,value:"\u81ea\u5b9a\u4e49"}];return c.a.createElement("div",{className:"DateRangeSelectionPanel"},c.a.createElement("div",{className:"DateRangeDropdownList"},c.a.createElement(S,{items:K,defaultSelectedValue:d.value||"\u5168\u90e8",customizeItemClickHandler:function(e){e.key<9?N(!1):N(!0),E(K[e.key])}})),g&&c.a.createElement("div",{className:"DateRangeSelection--Custom"},c.a.createElement("div",{className:"DateRangeSelection DateRangeSelection--CustomStart"},c.a.createElement("div",{className:"StartDateContainer",onClick:function(){T(!A)}},c.a.createElement("div",{className:"Title"},"\u8d77\u59cb\u65f6\u95f4"),c.a.createElement("div",{className:"Value"},W(C))),A&&c.a.createElement(y.a,{input:!1,value:C,defaultValue:C,onChange:function(e){var t=e.format("YYYY-MM-DD");h(new Date(t)),T(!A)},className:"DateTimeStyles StartDatePicker",timeFormat:!1})),c.a.createElement("div",{className:"DateRangeSelection DateRangeSelection--CustomEnd"},c.a.createElement("div",{className:"EndDateContainer",onClick:function(){M(!w)}},c.a.createElement("div",{className:"Title"},"\u7ec8\u6b62\u65f6\u95f4"),c.a.createElement("div",{className:"Value"},W(k))),w&&c.a.createElement(y.a,{input:!1,value:k,defaultValue:k,onChange:function(e){var t=e.format("YYYY-MM-DD");F(new Date(t)),M(!w)},className:"DateTimeStyles EndDatePicker",timeFormat:!1}))),c.a.createElement(fe,{submitHandler:function(){9===d.key?o(Object(f.a)({},d,{minDate:C,maxDate:k})):o(d)},cancelHandler:function(){s()}}))},formatter:function(e){if(e.minDate&&e.maxDate){var t="object"===typeof e.minDate?W(e.minDate):e.minDate,a="object"===typeof e.maxDate?W(e.maxDate):e.maxDate;return"".concat(t," - ").concat(a)}return"\u5168\u90e8"}},{type:"amountRanges",name:"\u91d1\u989d",defaultValue:"",comp:Ne,formatter:function(e){return e.map(function(e){var t=e.minAmount,a=e.maxAmount;return 0===+a?">= ".concat(t):"".concat(t," - ").concat(a)}).join(", ")}},{type:"category",name:"\u7c7b\u522b",defaultValue:"\u5168\u90e8",comp:ge,formatter:function(e){var t=e.category,a=e.subcategory;return"".concat(t," - ").concat(a)}},{type:"city",name:"\u57ce\u5e02",defaultValue:"\u5168\u90e8",comp:function(e){var t=e.currentValue,a=void 0===t?"\u5168\u90e8":t,i=e.submitHandler,o=void 0===i?function(){}:i,l=e.cancelHandler,s=void 0===l?function(){}:l,u=Object(n.useState)([]),d=Object(r.a)(u,2),E=d[0],v=d[1],p=Object(n.useState)([]),f=Object(r.a)(p,2),g=f[0],N=f[1];Object(n.useEffect)(function(){m.a.get("/api/wacai/getAllCities").then(function(e){var t=e.data.data||[],n=[];t.forEach(function(e){n.push(e.city)}),v(n),N("\u5168\u90e8"===a?n.slice():a)})},[]);return c.a.createElement("div",{className:"CitySelectionPanel"},c.a.createElement("div",{className:"CityMultiSelection"},c.a.createElement(pe,{defaultSelection:g,validSeletions:E,handleSelection:function(e){N(e)}})),c.a.createElement(fe,{submitHandler:function(){g.length===E.length?o("\u5168\u90e8"):o(g)},cancelHandler:function(){s()}}))},formatter:function(e){return e.join?e.join(", "):e}},{type:"keyword",name:"\u5173\u952e\u5b57",defaultValue:"",comp:function(e){var t=e.currentValue,a=void 0===t?"":t,i=e.submitHandler,o=void 0===i?void 0:i,l=e.cancelHandler,s=void 0===l?void 0:l,m=Object(n.useState)(a),u=Object(r.a)(m,2),d=u[0],E=u[1];return c.a.createElement("div",{className:"KeywordsSelectionPanel"},c.a.createElement("div",{className:"InputContainer"},c.a.createElement("input",{onChange:function(e){E(e.target.value)},placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u5b57",value:d})),c.a.createElement(fe,{submitHandler:function(){o(d)},cancelHandler:function(){s()}}))},formatter:function(e){return e}},{type:"tags",name:"\u6807\u7b7e",defaultValue:"",comp:function(e){var t=e.currentValue,a=void 0===t?"\u5168\u90e8":t,i=e.submitHandler,o=void 0===i?function(){}:i,l=e.cancelHandler,s=void 0===l?function(){}:l,u=Object(n.useState)([]),d=Object(r.a)(u,2),E=d[0],v=d[1],p=Object(n.useState)([]),f=Object(r.a)(p,2),g=f[0],N=f[1];Object(n.useEffect)(function(){m.a.get("/api/wacai/getAllTags").then(function(e){var t=e.data.data||[];v(t),N("\u5168\u90e8"===a?t.slice():a)})},[]);return c.a.createElement("div",{className:"TagSelectionPanel"},c.a.createElement("div",{className:"TagMultiSelection"},c.a.createElement(pe,{defaultSelection:g,validSeletions:E,handleSelection:function(e){N(e)}})),c.a.createElement(fe,{submitHandler:function(){g.length===E.length?o("\u5168\u90e8"):o(g)},cancelHandler:function(){s()}}))},formatter:function(e){return e.join?e.join(", "):e}}],Oe=(a(115),Object(l.b)(function(e){return{searchParams:(e.search||{}).searchParams||{}}})(function(e){var t=e.searchParams,a=e.dispatch,n=e.submitHandler,i=void 0===n?void 0:n;return c.a.createElement("div",{className:"AdvancedSearch"},c.a.createElement("div",{className:"AdvancedSearch-Toolbar"},c.a.createElement("div",{className:"SubmitButton",onClick:function(){var e=[];Object.keys(t).map(function(a){if(Array.isArray(t[a]))"amountRanges"===a?e.push("".concat(a,"=").concat(JSON.stringify(t[a]))):"city"!==a&&"tags"!==a||e.push("".concat(a,"=").concat(t[a].join(",")));else if("object"===typeof t[a]){if("dateRange"===a)e.push("".concat(a,"=").concat(JSON.stringify(t[a])));else if("category"===a)for(var n in t[a])e.push("".concat(n,"=").concat(t[a][n]))}else e.push("".concat(a,"=").concat(t[a]))}),a({type:"APP_LOADING"}),m.a.get("/api/wacai/deepSearchFinItems?".concat(e.join("&"))).then(function(e){var t=e.data;i();var n=t.data||[];a({type:"SEARCH_FIN_RESULTS_LOADED",finItems:n,searchLoading:!1}),a({type:"APP_LOADED"})},function(){a({type:"APP_LOADED"})})}},"\u786e\u8ba4"),c.a.createElement("div",{className:"clearFloat"})),be&&be.map(function(e,t){var a=e.type,n=e.name,i=e.comp,o=e.defaultValue,r=e.formatter;return c.a.createElement("div",{className:"AdvanceSearchItem-Container",key:t},c.a.createElement(ve,{type:a,name:n,Comp:i,defaultValue:o,formatter:r}))}))})),Ce=(a(116),Object(l.b)(function(e){return{finItems:(e.search||{}).finItems||[]}})(function(e){var t=e.finItems,a=void 0===t?[]:t,i=e.dispatch,o=Object(n.useRef)(null),l=Object(n.useState)(!1),s=Object(r.a)(l,2),m=s[0],u=s[1],d={position:"relative",top:"50%",transform:"translateY(-50%)"};Object(n.useEffect)(function(){},[o]);var E=function(){u(!0)};return c.a.createElement("div",{className:"SearchFinItem",ref:o},c.a.createElement(Z,{closeHandler:function(){m?u(!1):i({type:"CHANGE_TO_FIN_HISTORY"})},hasSearch:!1,barTitle:m?"\u9ad8\u7ea7\u641c\u7d22":""},function(){return m?null:c.a.createElement(ue,{customStyles:d,advancedSearchHanlder:E})}),!m&&a.length>0&&c.a.createElement(c.a.Fragment,null,c.a.createElement(Ee,{finItems:a}),c.a.createElement(ne,{isExpanded:!1,scrollIntoViewRef:o})),!m&&0===a.length&&c.a.createElement("div",{className:"SearchFinItem--NoResults"},"\u65e0\u7ed3\u679c"),m&&c.a.createElement("div",{className:"AdvancedSearch-Container"},c.a.createElement(Oe,{submitHandler:function(){u(!1)}})))})),he=(a(117),function(e){var t={width:e.width||"4em",height:e.height||"4em"};return c.a.createElement("div",{className:"Loading",style:t})}),ye=(a(118),Object(l.b)(function(e){return{selectedItem:e.fin?e.fin.selectedItem:null,pageIndex:e.fin?e.fin.pageIndex:"MAIN",isAppLoading:e.fin&&e.fin.isAppLoading,notificationType:e.notification?e.notification.notificationType:"",notificationMsg:e.notification?e.notification.notificationMsg:""}})(function(e){var t=e.pageIndex,a=e.notificationType,i=e.notificationMsg,o=e.selectedItem,l=e.isAppLoading,s=e.dispatch,u=Object(n.useState)(0),d=Object(r.a)(u,2),E=d[0],p=d[1],f=Object(n.useState)(0),g=Object(r.a)(f,2),N=g[0],b=g[1],O=Object(n.useState)(0),C=Object(r.a)(O,2),h=C[0],y=C[1],S=Object(n.useState)(new Array(5).fill({})),j=Object(r.a)(S,2),I=j[0],A=j[1],T=Object(n.useState)(!0),D=Object(r.a)(T,2),_=D[0],k=D[1];Object(n.useEffect)(function(){if((!o||0!==o.amount&&!o.id)&&(k(!0),!o)){var e=new Date;m.a.get("/api/wacai/getFinList?year=".concat(e.getFullYear(),"&month=").concat(e.getMonth()+1,"&day=").concat(e.getDate(),"&dayOfWeek=").concat(e.getDay(),"&top=").concat(15)).then(function(e){var t=e.data;k(!1);var a=t.monthTotal,n=void 0===a?0:a,c=t.weekTotal,i=void 0===c?0:c,o=t.dayTotal,r=void 0===o?0:o,l=t.data||[];A(l),p(n),b(i),y(r)},function(e){var t=e.response;k(!1),401===t.status&&s({type:"TOKEN_INVALID"})})}},[o]);return c.a.createElement("div",{className:"App"},i&&c.a.createElement("div",{className:"App-Page-Notification"},c.a.createElement(me,{type:a,message:i})),l&&c.a.createElement("div",{className:"App-Page-Loading"},c.a.createElement("div",{className:"LoadingContainer"},c.a.createElement(he,null))),"SEARCH_FIN_ITEM"===t&&c.a.createElement("div",{className:"App-Page-Fin-Search"},c.a.createElement(Ce,null)),"CATEGORY_SELECTION"===t&&c.a.createElement("div",{className:"App-Page-Cat-Selection"},c.a.createElement(ee,null)),"FIN_HISTORY"===t&&c.a.createElement("div",{className:"App-Page-Fin-History"},c.a.createElement(ce,null)),"FIN_TEMPLATE_LIST"===t&&c.a.createElement("div",{className:"App-Page-Fin-Template-List"},c.a.createElement(le,null)),"MAIN"===t&&c.a.createElement("div",{className:"App-Page-Main"},c.a.createElement("div",{className:"App-Logout",onClick:function(){m.a.post("/api/user/logout").then(function(){setTimeout(function(){window.location.reload(!0)},0)})}}),c.a.createElement("div",{className:"App-Header"},c.a.createElement("div",{className:"Header-MonthTotal"},c.a.createElement("div",{className:"Caption"},"\u672c\u6708\u603b\u8ba1"),c.a.createElement("div",{className:"Amount",onClick:function(){s({type:"CHANGE_TO_FIN_HISTORY"})}},c.a.createElement(se,{total:E,duration:100}))),c.a.createElement("div",{className:"Header-WeekDayTotal"},c.a.createElement("div",{className:"Caption"},"\u672c\u5468\u603b\u8ba1"),c.a.createElement("div",{className:"Amount"},c.a.createElement(se,{total:N,duration:100})),c.a.createElement("div",{className:"Caption"},"\u4eca\u65e5\u603b\u8ba1"),c.a.createElement("div",{className:"Amount"},c.a.createElement(se,{total:h,duration:100})))),o&&c.a.createElement("div",{className:"App-FinDetails"},c.a.createElement(Q,{item:o})),c.a.createElement("div",{className:"App-Main"},c.a.createElement(v,{isLoading:_,items:I}))))})),Se=(a(119),new Array(4).fill(void 0)),je=Object(l.b)()(function(e){e.dispatch;var t=Object(n.useState)(""),a=Object(r.a)(t,2),i=a[0],o=a[1],l=Object(n.useState)(Se),s=Object(r.a)(l,2),u=s[0],d=s[1],E=function(e){var t=e.target.files[0],a=+e.target.parentElement.getAttribute("data-fileid");d(u.map(function(e,n){return n===a?t:e})),function(e){var t=new FormData;return t.append("file",e),m.a.post("/api/file/imageUpload",t)}(t).then(function(e){console.log(e)},function(e){console.log(e)})};return c.a.createElement("div",{className:"FileUploader"},c.a.createElement("div",{className:"NameInput"},c.a.createElement("input",{type:"input",placeholder:"Please input your name...",value:i,onChange:function(e){var t=e.target.value;o(t)}})),c.a.createElement("div",{className:"ImageUploader"},c.a.createElement("div",{className:"ImageUploadSpace"},u.map(function(e,t){return c.a.createElement("div",{className:"ImageUploadFrame",key:t,"data-fileId":t},c.a.createElement("input",{className:"FileUpload__Input MyWacai-File-Uploader ".concat(e?"FileUpload--Transparent":""),type:"file",name:"file",onChange:E}),e&&c.a.createElement("div",{className:"FileUpload__Name"},c.a.createElement("div",null,e.name)))}))),c.a.createElement("div",{className:"ButtonGroup"},c.a.createElement("div",{className:"SubmitButton Button"},"Submit"),c.a.createElement("div",{className:"CancelButton Button"},"Cancel")))}),Ie=a(11),Ae=a(46),Te=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function De(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var _e=a(17),ke=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_ITEM":return t.item.date||(t.item.date=K()),Object(f.a)({},e,{pageIndex:"MAIN",selectedItem:t.item});case"RESET_SELECTED_ITEM":return Object(f.a)({},e,{selectedItem:null});case"CREATE_ITEM":var a=function(){var e=new Date,t=e.getDay(),a="\u5468\u672b",n="\u665a\u9910";if(0===t||6===t){a="\u5468\u672b";var c=e.getHours();c<=10?n="\u65e9\u9910":c<15&&c>10?n="\u5348\u9910":c<20&&c>16&&(n="\u665a\u9910")}return{category:a,subcategory:n}}(),n=a.category,c=a.subcategory;return Object(f.a)({},e,{selectedItem:{category:n,subcategory:c,date:K(),amount:0}});case"CHANGE_TO_CATEGORY_SELECTION":return Object(f.a)({},e,{selectedItem:t.currentItem||{},pageIndex:"CATEGORY_SELECTION",selectedCatGroup:t.selectedCatGroup||{}});case"CHANGE_TO_MAIN":return Object(f.a)({},e,{pageIndex:"MAIN",updatedCatGroup:t.updatedCatGroup||{}});case"CATEGORY_SELECTION_DONE":var i="";return i=e.selectedItem?"MAIN":"FIN_TEMPLATE_LIST",Object(f.a)({},e,{pageIndex:i,updatedCatGroup:t.updatedCatGroup||{}});case"CHANGE_TO_FIN_HISTORY":return Object(f.a)({},e,{pageIndex:"FIN_HISTORY"});case"RESET_UPDATED_CAT_GROUP":return Object(f.a)({},e,{updatedCatGroup:{}});case"CHANGE_TO_FIN_TEMPLATE_LIST":return Object(f.a)({},e,{pageIndex:"FIN_TEMPLATE_LIST",isCreatingTemplate:!1});case"CREATE_TEMPLATE":return Object(f.a)({},e,{isCreatingTemplate:!0});case"OPEN_SEARCH_FIN_MODE":return Object(f.a)({},e,{pageIndex:"SEARCH_FIN_ITEM"});case"APP_LOADING":return Object(f.a)({},e,{isAppLoading:!0});case"APP_LOADED":return Object(f.a)({},e,{isAppLoading:!1});default:return e}},Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_MESSAGE":return Object(f.a)({},e,{notificationType:t.notificationType,notificationMsg:t.message});case"RESET_MESSAGE":return Object(f.a)({},e,{notificationType:"",notificationMsg:""});default:return e}},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case"LOGIN_SUCCESS":return Object(f.a)({},e,{loginStatus:!0});case"TOKEN_INVALID":return Object(f.a)({},e,{loginStatus:!1});default:return e}},Pe=a(20),we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEARCH_FIN_RESULTS_LOADED":return Object(f.a)({},e,{finItems:t.finItems||[]});case"SET_ADVANCE_SEARCH_PARAM":var a=e.searchParams||{},n=t.itemType,c=t.itemValue;return Object(f.a)({},e,{searchParams:Object.assign({},Object(f.a)({},a,Object(Pe.a)({},n,c)))});default:return e}},Me=Object(_e.b)({fin:ke,notification:Fe,login:Le,search:we}),xe=(a(120),function(e){var t=e.loginSuccessCallback,a=Object(n.useState)(""),i=Object(r.a)(a,2),o=i[0],l=i[1],s=Object(n.useState)(""),u=Object(r.a)(s,2),d=u[0],E=u[1];return c.a.createElement("div",{className:"Login"},c.a.createElement("div",{className:"LoginContainer"},c.a.createElement("div",{className:"UsernameInput"},c.a.createElement("div",{className:"Username-Image"},c.a.createElement("input",{type:"input",placeholder:"\u7528\u6237\u540d",onChange:function(e){l(e.target.value)},value:o}))),c.a.createElement("div",{className:"PasswordInput"},c.a.createElement("div",{className:"Password-Image"},c.a.createElement("input",{type:"password",placeholder:"\u5bc6\u7801",onChange:function(e){E(e.target.value)},value:d}))),c.a.createElement("div",{className:"ButtonGroup"},c.a.createElement("div",{className:"SubmitButton",onClick:function(){if(o&&d){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_COOKIE_NAME:"DAVID_FIN",REACT_APP_USERNAME:"wanderyt",REACT_APP_PASSWORD:"password"}).REACT_SERVER_API_HOST||"";m.a.post("".concat(e,"/api/user/login"),{data:{username:o,password:d}}).then(function(){t&&t()})}}},"\u767b\u5f55"))))}),He=(a(121),Object(l.b)(function(e){return{loginStatus:(e.login||{}).loginStatus}})(function(e){var t=e.loginStatus,a=e.dispatch,i=e.children,o=function(){a({type:"LOGIN_SUCCESS"})};return Object(n.useEffect)(function(){var e=Object({NODE_ENV:"production",PUBLIC_URL:"",REACT_APP_COOKIE_NAME:"DAVID_FIN",REACT_APP_USERNAME:"wanderyt",REACT_APP_PASSWORD:"password"}).REACT_SERVER_API_HOST||"";void 0===t&&m.a.get("".concat(e,"/api/user/validateToken")).then(function(){o()},function(){a({type:"TOKEN_INVALID"})})},[]),void 0===t?null:c.a.createElement("div",{className:"LoginProvider"},t?i:c.a.createElement("div",{className:"App-Login"},c.a.createElement(xe,{loginSuccessCallback:o})))})),Re=Object(_e.c)(Me,{fin:{pageIndex:"MAIN"}},window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());Object(Ie.e)(function(e){var t=e.location,a=void 0===t?{pathname:""}:t;return c.a.createElement(c.a.Fragment,null,a.pathname.indexOf("fileUploader")>-1?c.a.createElement(je,null):c.a.createElement(ye,null))});o.a.render(c.a.createElement(l.a,{store:Re},c.a.createElement(He,null,c.a.createElement(Ae.a,null,c.a.createElement(function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Ie.a,{path:"/fileUploader",component:je,key:"FileUploader"}),c.a.createElement(Ie.a,{exact:!0,path:"/",component:ye,key:"App"}))},null)))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");Te?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):De(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):De(t,e)})}}()}]),[[47,1,2]]]);
//# sourceMappingURL=main.86c34a5d.chunk.js.map